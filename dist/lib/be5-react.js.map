{"version":3,"file":"be5-react.js","sources":["../../src/scripts/be5/settings.js","../../src/scripts/be5/constants.js","../../src/scripts/be5/utils.js","../../src/scripts/be5/messages.js","../../src/scripts/be5/core/bus.js","../../src/scripts/be5/preconditions.js","../../src/scripts/be5/core/changeDocument.js","../../src/scripts/be5/services/actionsCollection.js","../../src/scripts/be5/be5.js","../../src/scripts/be5/core/documentState.js","../../src/scripts/be5/actions/loading.js","../../src/scripts/be5/components/forms/FinishedResult.js","../../src/scripts/be5/components/StaticPage.js","../../src/scripts/be5/components/ErrorPane.js","../../src/scripts/be5/services/formsCollection.js","../../src/scripts/be5/services/tablesCollection.js","../../src/scripts/be5/services/tables.js","../../src/scripts/be5/components/tables/OperationBox.js","../../src/scripts/be5/components/tables/QuickColumns.js","../../src/scripts/be5/components/tables/Table.js","../../src/scripts/be5/services/forms.js","../../src/scripts/be5/actions/form.js","../../src/scripts/be5/actions/login.js","../../src/scripts/be5/actions/logout.js","../../src/scripts/be5/actions/static.js","../../src/scripts/be5/actions/table.js","../../src/scripts/be5/components/Document.js","../../node_modules/brace/mode/mysql.js","../../node_modules/brace/theme/xcode.js","../../src/scripts/be5/components/QueryBuilder.js","../../src/scripts/be5/actions/qBuilder.js","../../src/scripts/be5/actions/text.js","../../src/scripts/be5/components/HelpInfo.js","../../src/scripts/be5/components/tables/TableForm.js","../../src/scripts/be5/components/tables/TableFormRow.js","../../src/scripts/be5/components/tables/FormTable.js","../../src/scripts/be5/components/properties/Property.js","../../src/scripts/be5/components/properties/PropertySet.js","../../src/scripts/be5/components/forms/Form.js","../../src/scripts/be5/components/properties/PropertyInput.js","../../src/scripts/be5/components/forms/SubmitOnChangeForm.js","../../src/scripts/be5/components/forms/ModalForm.js","../../src/scripts/be5/be5init.js","../../src/scripts/be5/core/documentUtils.js","../../src/scripts/be5/core/http.js","../../src/scripts/be5/components/LanguageSelector.js","../../src/scripts/be5/components/RoleSelector.js","../../src/scripts/be5/components/menu/MenuFooter.js","../../src/scripts/be5/services/actions.js","../../src/scripts/be5/components/menu/MenuNode.js","../../src/scripts/be5/components/menu/MenuBody.js","../../src/scripts/be5/components/menu/MenuSearchField.js","../../src/scripts/be5/components/menu/Menu.js","../../src/scripts/be5/components/SideBar.js","../../src/scripts/be5/components/SplitPane.js","../../src/scripts/be5/components/Be5Components.js","../../src/scripts/be5/components/Application.js","../../src/scripts/be5/components/be5Menu/Be5MenuHolder.js","../../src/scripts/be5/components/be5Menu/Be5Menu.js","../../src/scripts/be5/components/be5Menu/Be5MenuItem.js","../../src/scripts/be5/components/Sorter.js","../../src/scripts/be5/components/TreeMenu.js","../../src/scripts/be5/components/FormWizard.js","../../src/scripts/be5/components/Navs.js","../../src/scripts/be5/components/properties/Properties.js","../../src/scripts/be5/index.js"],"sourcesContent":["export default {};\r\n","export default Object.freeze({\r\n  DEFAULT_VIEW: 'All records'\r\n});\r\n","\n\nexport default\n{\n  getBaseUrl()\n  {\n    let getUrl = window.location;\n    let baseUrl = getUrl.protocol + \"//\" + getUrl.host;\n    if(getUrl.pathname.split('/')[1] !== \"\")  baseUrl += \"/\" + getUrl.pathname.split('/')[1];\n    return baseUrl\n  }\n}","export default {\n  en: {\n    errorCannotConnect : 'Cannot connect to server',\n    errorServerQueryException : 'Error during server query: $message',\n    errorInvalidErrorResponse : 'Server returned unknown error',\n    errorNoData : 'Error communicating with server: no data received',\n    errorUnknownAction : 'Unknown action: $action',\n    errorUrlParameterAbsent : 'Invalid URL: $parameter is absent',\n\n    welcome: 'Hello!',\n    loading: 'Page is loading...',\n    settings: 'Settings',\n    emptyTable: 'Nothing found',\n    roles: 'Roles',\n    back: 'Back',\n    error: 'Error:',\n    cancel: 'Cancel',\n    reload: 'reload',\n    All: 'All',\n    successfullyCompleted: 'Successfully completed.',\n\n    filter: 'Filter...',\n\n    Submit: 'Submit',\n\n    property : {\n      locale: 'en',\n      clearAllText: 'Clear all',\n      clearValueText: 'Clear value',\n      noResultsText: 'No results found',\n      searchPromptText: 'Type to search',\n      placeholder: 'Select ...',\n      loadingPlaceholder: 'Loading...'\n    },\n\n    formComponentNotFound:  'Form component not found: ',\n    tableComponentNotFound: 'Table component not found: ',\n    helpInfo: \"Help\",\n    details: \"Details\",\n\n    NotFound: \"Not Found\",\n  },\n\n  ru: {\n    errorCannotConnect : 'Не могу подключиться к серверу',\n    errorServerQueryException : 'Ошибка сервера: $message',\n    errorInvalidErrorResponse : 'Сервер вернул неизвестную ошибку',\n    errorNoData : 'Ошибка связи с сервером: ответ не получен',\n    errorUnknownAction : 'Неизвестная операция: $action',\n    errorUrlParameterAbsent : 'Неверный URL: отсутствует $parameter',\n\n    welcome: 'Добро пожаловать!',\n    loading: 'Загрузка...',\n    settings: 'Настройки',\n    emptyTable: 'Нет данных',\n    roles: 'Роли',\n    back: 'Назад',\n    error: 'Ошибка:',\n    cancel: 'Отмена',\n    reload: 'Перезагрузить',\n    All: 'Все',\n    successfullyCompleted: 'Успешно выполнено.',\n\n    filter: 'Фильтр...',\n\n    Submit: 'Выполнить',\n\n    property: {\n      locale: 'ru',\n      clearAllText: 'Очистить всё',\n      clearValueText: 'Очистить',\n      noResultsText: 'Нет результатов',\n      searchPromptText: 'Начните вводить для поиска',\n      placeholder: 'Выберите...',\n      loadingPlaceholder: 'Загрузка...'\n    },\n\n    formComponentNotFound:  'Компонент формы не найден: ',\n    tableComponentNotFound: 'Компонент таблицы не найден: ',\n    helpInfo: \"Справка\",\n    details: \"Подробнее\",\n\n    NotFound: \"Не найдено\",\n  }\n};\n","const listeners = (function() {\r\n  const listenersObject = {};\r\n  \r\n  return function(key, replacement) {\r\n    if (replacement) {\r\n      listenersObject[key] = replacement;\r\n    }\r\n    if (!listenersObject[key]) {\r\n      listenersObject[key] = [];\r\n    }\r\n    return listenersObject[key];\r\n  };\r\n})();\r\n\r\nfunction listen(eventType, listener) {\r\n  listeners(eventType).push(listener);\r\n  //console.log(\"listen: \" + eventType + \" \" + listener);\r\n};\r\n\r\n//function notListen(eventType, listener) {//fix not work\r\n//  delete listeners(eventType);\r\n//  //console.log(\"notListen: \" + eventType + \" \" + listener);\r\n//};\r\n\r\nfunction fire(type, event = {}) {\r\n  listeners(type).forEach(listener => listener(event));\r\n};\r\n\r\nfunction replaceListeners(eventType, listener) {\r\n  listeners(eventType, [listener]);\r\n};\r\n\r\nexport default {\r\n  /* function(eventType: string, listener: function(event: object)) */\r\n  listen: listen,\r\n  //notListen: notListen,\r\n  /* function(type: string, event: object) */\r\n  fire: fire,\r\n  /* function(eventType: string, listener: function(event: object)) */\r\n  replaceListeners: replaceListeners\r\n};\r\n","const createMandatoryArgumentError = message => ({\r\n  name: 'MandatoryArgumentError',\r\n  message: message\r\n});\r\n\r\nconst createArgumentEqualityError = message => ({\r\n  name: 'ArgumentEqualityError',\r\n  message: message\r\n});\r\n\r\nexport default {\r\n  passed: function(argument, message) {\r\n    if (!argument) {\r\n      throw createMandatoryArgumentError(message || 'argument is missing');\r\n    }\r\n    return argument;\r\n  },\r\n  eq: function(arg1, arg2, message) {\r\n    if (arg1 !== arg2) {\r\n      throw createArgumentEqualityError(message || `${arg1} should be equal to ${arg2}`);\r\n    }\r\n  }\r\n};\r\n","import bus from './bus';\r\nimport Preconditions    from '../preconditions';\r\n\r\nexport default (documentName, value) => {\r\n  Preconditions.passed(documentName);\r\n  bus.fire(documentName, value);\r\n}\r\n","const actionsCollection = {\n  types: {},\n\n  getAction(actionName) {\n    return this.types[actionName];\n  },\n\n  registerAction(actionName, fn) {\n    //console.log(\"registerTable: \" + actionName, fn)\n    this.types[actionName] = fn;\n  }\n};\n\nexport default actionsCollection;\n","import React    from 'react';\r\nimport Settings from './settings';\r\nimport Const    from './constants';\r\nimport utils    from './utils';\r\nimport messages from './messages';\r\nimport bus      from './core/bus';\r\nimport changeDocument from './core/changeDocument';\r\nimport actionsCollection from './services/actionsCollection'\r\n\r\n\r\nconst be5 = {\r\n  debug: true,\r\n\r\n  def: {\r\n    URL_PREFIX : '/api/',\r\n    APPLICATION_PREFIX : '/',\r\n  },\r\n\r\n  messages: messages.en,\r\n  mainDocumentName: 'MainDocument',\r\n  mainModalDocumentName: 'MainModalDocument',\r\n  documentRefreshSuffix: \"_refresh\",\r\n\r\n  appInfo: {},\r\n\r\n  // load: {\r\n  //   css(url) {\r\n  //     var link = document.createElement(\"link\");\r\n  //     link.type = \"text/css\";\r\n  //     link.rel = \"stylesheet\";\r\n  //     if(be5.isRemoteUrl(url)){\r\n  //       link.href = url;\r\n  //     }else{\r\n  //       link.href = '/' + url;\r\n  //     }\r\n  //     document.getElementsByTagName(\"head\")[0].appendChild(link);\r\n  //   }\r\n  // },\r\n\r\n  locale: {\r\n    set(loc, addMessages) {\r\n      if(!loc) return;\r\n      loc = loc.toLowerCase();\r\n      if(be5.locale.value === loc) return;\r\n      be5.locale.value = loc;\r\n      be5.messages = {};\r\n      let newMessages = messages[loc];\r\n      let defMessages = messages.en;\r\n      for(let key in defMessages) {\r\n        let msg = newMessages[key];\r\n        if(msg === undefined)\r\n          msg = defMessages[key];\r\n        be5.messages[key] = msg;\r\n      }\r\n      if(addMessages !== null) {\r\n        for(let key in addMessages) {\r\n          be5.messages[key] = addMessages[key];\r\n        }\r\n      }\r\n\r\n      var dataTablesLocal = 'en';\r\n      switch(be5.locale.value){\r\n        case \"ru\": dataTablesLocal = 'Russian'; break;\r\n        case \"ja\": dataTablesLocal = 'Japanese'; break;\r\n      }\r\n      if(dataTablesLocal !== 'en'){\r\n        $.getJSON( \"//cdn.datatables.net/plug-ins/1.10.13/i18n/\" + dataTablesLocal + \".json\", function( data ) {\r\n          be5.messages['dataTables'] = data;\r\n          bus.fire('LanguageChanged');\r\n        });\r\n      }else{\r\n        bus.fire('LanguageChanged');\r\n      }\r\n    },\r\n\r\n    msg(key) {\r\n      var value = be5.messages[key];\r\n      return value === undefined ? key : value;\r\n    },\r\n\r\n    addMessages(loc, msgs) {\r\n      for(var key in msgs) {\r\n        messages[loc][key] = msgs[key];\r\n      }\r\n      if(loc === be5.locale.value) {\r\n        for(var key in msgs) {\r\n          be5.messages[key] = msgs[key];\r\n        }\r\n      }\r\n    },\r\n\r\n    get() {\r\n      return be5.locale.value;\r\n    }\r\n  },\r\n\r\n  ui: {\r\n    //documentTypes: {},\r\n    /*\r\n     * Note that creator doesn't create a document,\r\n     * it creates a description of a component as React's <ComponentName /> does.\r\n     */\r\n//    registerDocumentType(type, creator) {\r\n//      be5.ui.documentTypes[type] = creator;\r\n//    },\r\n\r\n//    createDocument(type, props) {\r\n//      return be5.ui.documentTypes[type](props);\r\n//    },\r\n\r\n    setTitle(docTitle) {\r\n      let titleComponents = [docTitle, be5.appInfo.title];\r\n      document.title = titleComponents.filter(function(c) {\r\n        return typeof(c) === 'string';\r\n      }).join(' - ');\r\n    },\r\n\r\n  },\r\n\r\n  url: {\r\n    set(url) {\r\n      if (url.substring(0, 1) === '#')\r\n        url = url.substring(1);\r\n      if (url.substring(0, 1) !== '!')\r\n        url = '!' + url;\r\n      url = '#' + url;\r\n      if(document.location.hash !== url){\r\n        document.location.hash = url;\r\n      }else{\r\n        be5.url.process(be5.mainDocumentName, url);\r\n      }\r\n    },\r\n\r\n    empty() {\r\n      let url = document.location.hash;\r\n      return url === '' || url === '#' || url === '!' || url === '#!';\r\n    },\r\n\r\n    clear() {\r\n      document.location.hash = '';\r\n    },\r\n\r\n    // escapeComponent(hashUriComponent) {\r\n    //   return encodeURIComponent(hashUriComponent);\r\n    // },\r\n\r\n    create(action, positional = [], named = {}) {\r\n      return be5.url.form([action].concat(positional), named);\r\n    },\r\n\r\n    form(positional, named = {}) {\r\n      const res = [];\r\n      for(let i=0; i<positional.length; i++) {\r\n        res.push(positional[i]);\r\n      }\r\n      for(let key in named) {\r\n        res.push(key+'='+named[key]);\r\n      }\r\n      return res.join('/');\r\n    },\r\n\r\n    parse(url) {\r\n      const segments = url.split('/');\r\n      const positional = [];\r\n      const named = [];\r\n\r\n      for (let i = 0; i < segments.length; i++) {\r\n        const s = segments[i];\r\n        if (s.indexOf('=') === -1) {\r\n          positional.push(s);\r\n        } else {\r\n          named.push(s.split('='));\r\n        }\r\n      }\r\n\r\n      return { positional: positional, named: _.object(named) };\r\n    },\r\n\r\n    process(documentName, url) {\r\n      if (url === '' || url === '#' || url === '#!') {\r\n        bus.fire('CallDefaultAction');\r\n      }\r\n      if (url.substring(0, 1) === '#')\r\n        url = url.substring(1);\r\n      if (url.substring(0, 1) !== '!')\r\n        return;\r\n      url = url.substring(1);\r\n      if (url === '') {\r\n        return;\r\n      }\r\n      let urlParts = url.split('/');\r\n      // if (!be5.hasAction(urlParts[0])) {\r\n      //   be5.log.error(be5.messages.errorUnknownAction.replace(\r\n      //       '$action', urlParts[0]));\r\n      //   return;\r\n      // }\r\n      let positional = [documentName];\r\n      let hashParams = {};\r\n      let hasHashParam = false;\r\n      for (let i = 1; i < urlParts.length; i++) {\r\n        let urlPart = urlParts[i];\r\n        let pos = urlPart.indexOf('=');\r\n        if (pos >= 0) {\r\n          let name = decodeURIComponent(urlPart.substring(0, pos).replace(/\\+/g, ' '));\r\n          let value = decodeURIComponent(urlPart.substring(pos + 1).replace(/\\+/g, ' '));\r\n          hashParams[name] = value;\r\n          hasHashParam = true;\r\n        } else {\r\n          positional.push(decodeURIComponent(urlPart).replace(/\\+/g, ' '));\r\n        }\r\n      }\r\n\r\n      if (hasHashParam)positional.push(hashParams);\r\n\r\n      const actionName = urlParts[0];\r\n      const action = actionsCollection.getAction(actionName);\r\n\r\n      if(action !== undefined){\r\n        //console.log(\"process\", documentName, url);\r\n        //changeDocument(documentName, { loading: true });\r\n        action.apply(be5, positional);\r\n      }else{\r\n        changeDocument(documentName, { value: be5.messages.errorUnknownAction.replace('$action', actionName) });\r\n        console.error(be5.messages.errorUnknownAction.replace('$action', actionName));\r\n      }\r\n    }\r\n  },\r\n\r\n  net: {\r\n    url(path) {\r\n      return be5.def.URL_PREFIX + path;\r\n    },\r\n\r\n    resourceUrl(resource) {\r\n      return '/be5/' + resource;\r\n    },\r\n\r\n    paramString(params) {\r\n      if(typeof(params) !== 'object') {\r\n        return '{}';\r\n      }\r\n      return JSON.stringify(params);\r\n    },\r\n\r\n    request(path, params, success, failure) {\r\n      return be5.net.requestUrl(be5.net.url(path), 'json', params, success, failure);\r\n    },\r\n\r\n    // transforms parameters!\r\n    requestJson(path, params, success, failure) {\r\n      return be5.net.requestUrl(be5.def.APPLICATION_PREFIX + path, 'json', be5.net.transform(params), success, failure);\r\n    },\r\n\r\n    requestHtml(path, success, failure) {\r\n      return be5.net.requestUrl(be5.def.APPLICATION_PREFIX + path, 'html', {}, success, failure);\r\n    },\r\n\r\n    transform(params) {\r\n      const copy = {};\r\n      for (let key in params) {\r\n      if (typeof params[key] === 'object') {\r\n        copy[key] = be5.net.paramString(params[key]);\r\n      } else {\r\n        copy[key] = params[key];\r\n      }\r\n      }\r\n      return copy;\r\n    },\r\n\r\n    requestUrl(url, type, params, success, failureFunc) {\r\n      let result = null;\r\n      const failure = function(data) {\r\n        result = data;\r\n        be5.log.error(data);\r\n        if (typeof (failureFunc) === 'function')failureFunc(data);\r\n      };\r\n\r\n      $.ajax({\r\n        url : utils.getBaseUrl() + url,\r\n        dataType : type,\r\n        type : 'POST',\r\n        data : params,\r\n        async: !!success,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        crossDomain: true,\r\n        success : function(data, status, xhr) {\r\n          if (xhr.status == 0) {\r\n            if (xhr.aborted)\r\n              return null;\r\n            if (data == undefined) {\r\n              data = {\r\n                type : 'error',\r\n                value : {\r\n                  message : be5.messages.errorCannotConnect,\r\n                  code : 'CLIENT_ERROR'\r\n                }\r\n              };\r\n            }\r\n            failure(data);\r\n            return;\r\n          }\r\n          if (data == undefined) {\r\n            data = {\r\n              type : 'error',\r\n              value : {\r\n                message : be5.messages.errorNoData,\r\n                code : 'CLIENT_ERROR'\r\n              }\r\n            };\r\n          }\r\n          if (typeof(data) === 'object' && data.type === 'error') {\r\n            if(typeof(data.value) !== 'object') {\r\n              data.value = {message : be5.messages.errorInvalidErrorResponse, code: 'CLIENT_ERROR'};\r\n            }\r\n            if (be5.net.errorHandlers[data.value.code]) {\r\n              be5.net.errorHandlers[data.value.code]();\r\n            } else {\r\n              failure(data);\r\n              return;\r\n            }\r\n          }\r\n          if(success) {\r\n            success(data);\r\n          } else {\r\n            result = data;\r\n          }\r\n        },\r\n        error(xhr, status, errorThrown) {\r\n          let data = {\r\n            type : 'error',\r\n            value : {\r\n              code : 'CLIENT_ERROR'\r\n            }\r\n          };\r\n          if (errorThrown && errorThrown.result == 0x80004005)\r\n            // Special case for FireFox\r\n            // see http://helpful.knobs-dials.com/index.php/0x80004005_%28NS_ERROR_FAILURE%29_and_other_firefox_errors\r\n            data.value.message = be5.messages.errorCannotConnect;\r\n          else\r\n            data.value.message = be5.messages.errorServerQueryException\r\n                .replace(\r\n                    \"$message\",\r\n                    errorThrown == undefined ? status\r\n                        + (xhr.status >= 500 ? \" \"\r\n                            + xhr.status\r\n                            + \" \"\r\n                            + xhr.statusText\r\n                            : \"\")\r\n                        : (errorThrown.message == undefined ? errorThrown\r\n                            .toString()\r\n                            : errorThrown.message));\r\n          failure(data);\r\n        }\r\n      });\r\n      return result;\r\n    },\r\n    errorHandlers: {}\r\n  },\r\n\r\n  log: {\r\n    error(data) {\r\n      bus.fire(\"alert\", {msg: data.value.message, type: 'error'}); //, time: 0\r\n      console.error(data.value.code + \"\\n\\n\" + data.value.message);\r\n      //changeDocument(\"errors-document\", { component: StaticPage, value: StaticPage.createValue(data.value.code, data.value.message)})\r\n    }\r\n  },\r\n\r\n  tableState: {\r\n    selectedRows: []\r\n  },\r\n\r\n  isRemoteUrl(url) {\r\n    const prefix = 'http';\r\n    return url.substr(0, prefix.length) === prefix;\r\n  },\r\n\r\n};\r\n\r\nexport default be5;\r\n","const states = [];\n\nfunction set(name, value)\n{\n  states[name] = value;\n}\n\nfunction get(name)\n{\n  return states[name];\n}\n\nfunction getAll()\n{\n  return states;\n}\n\nexport default{\n  set: set,\n  get: get,\n  getAll: getAll\n};\n","import React          from 'react';\nimport changeDocument from '../core/changeDocument';\nimport actionsCollection from '../services/actionsCollection'\n\nconst action = function(documentName, page) {\n  changeDocument(documentName, { component: Loading })\n};\n\nclass Loading extends React.Component\n{\n  render() {\n    return <div className=\"document-loader\"/>;\n  }\n}\n\nactionsCollection.registerAction(\"loading\", action);\n\nexport default action;","import React          from 'react';\nimport PropTypes      from 'prop-types';\nimport be5            from '../../be5';\nimport forms          from '../../services/forms';\n\n\nclass FinishedResult extends React.Component\n{\n  componentDidMount() {\n    forms.changeLocationHash(this.props);\n  }\n\n  refresh() {\n    console.info(\"FinishedResult not support refresh\");\n  }\n\n  render() {\n    const back = () => { history.back(); };\n    const attributes = this.props.value.data.attributes;\n\n    let message = attributes.message;\n    if(attributes.status === 'finished' && attributes.message === undefined){\n      message = be5.messages.successfullyCompleted;\n    }\n\n    return (\n      <div className=\"finishedResult\">\n        <div dangerouslySetInnerHTML={{__html: message}}/>\n      </div>\n    );\n//    <div className=\"linkBack\">\n//              <button className=\"btn btn-secondary btn-sm\" onClick={back}>\n//                {be5.messages.back}\n//              </button>\n//            </div>\n  }\n}\n\nFinishedResult.propTypes =  {\n  value: PropTypes.shape({\n    data: PropTypes.shape({\n      attributes: PropTypes.object.isRequired,\n      meta: PropTypes.shape({\n        _ts_: PropTypes.isRequired\n      })\n    })\n  }),\n};\n\nexport default FinishedResult;","import React          from 'react';\nimport PropTypes      from 'prop-types';\nimport be5            from '../be5';\n\nclass StaticPage extends React.Component\n{\n  render() {\n    const attributes = this.props.value.data.attributes;\n\n    const title = attributes.title ? (<h1 className='staticPage__title' >{attributes.title}</h1>) : null;\n\n    return <div className='staticPage'>\n      {title}\n      <div className='staticPage__text' dangerouslySetInnerHTML={ {__html: attributes.content} } />\n    </div>;\n  }\n\n  refresh() {\n    if(this.props.value.links.self !== undefined) {\n      be5.url.process(this.props.frontendParams.documentName, \"#!\" + this.props.value.links.self);\n    }else{\n      console.info(\"staticPage without links.self\");\n    }\n  }\n\n  static createValue(title, text)\n  {\n    return StaticPage.createValue(title, text, {_ts_: new Date().getTime()}, {});\n  }\n\n  static createValue(title, text, meta, links)\n  {\n    return {\n      data: {\n        type: 'staticPage',\n        attributes: {\n          title: title,\n          content: text\n        }\n      },\n      meta: meta,\n      links: links\n    }\n  }\n\n}\n\n// StaticPage.defaultProps = {\n//   value: ''\n// };\n\nStaticPage.propTypes =  {\n  value: PropTypes.shape({\n    data: PropTypes.shape({\n      attributes: PropTypes.shape({\n        title   : PropTypes.string.isRequired,\n        content: PropTypes.string.isRequired,\n      }),\n      meta: PropTypes.shape({\n        _ts_: PropTypes.isRequired,\n      })\n    })\n  }),\n};\n\nexport default StaticPage;","import React          from 'react';\nimport PropTypes      from 'prop-types';\nimport be5            from '../be5';\nimport forms          from '../services/forms';\nimport { Collapse, Button, CardBody, Card } from 'reactstrap';\n\n\nclass ErrorPane extends React.Component\n{\n  constructor(){\n    super();\n    this.state = {helpCollapse: false};\n    this.helpCollapseToggle = this.helpCollapseToggle.bind(this);\n  }\n\n  componentDidMount() {\n    forms.changeLocationHash(this.props);\n  }\n\n  helpCollapseToggle() {\n    this.setState({ helpCollapse: !this.state.helpCollapse });\n  }\n\n  refresh() {\n    if(this.props.value.links.self !== undefined) {\n      be5.url.process(this.props.frontendParams.documentName, \"#!\" + this.props.value.links.self);\n    }else{\n      console.info(\"errorPane without links.self, most likely error on the execute operation\");\n    }\n  }\n\n  render() {\n    const error = this.props.value.errors ? this.props.value.errors[0] : this.props.value;\n    return <div className='errorPane'>\n      <h1 className='errorPane__title' >{error.status} - {error.title}</h1>\n      <br/>\n      {error.code !== undefined ?\n        <pre className='errorPane__code' dangerouslySetInnerHTML={ {__html: error.code} }/> : null\n      }\n      {error.detail !== undefined ?\n        <div>\n          <Button color=\"info\" className=\"btn-sm\" onClick={this.helpCollapseToggle} style={{ marginBottom: '1rem' }}>\n            {be5.messages.details}\n          </Button>\n          <Collapse isOpen={this.state.helpCollapse}>\n            <Card>\n              <CardBody>\n                <pre className='errorPane__detail' >{error.detail}</pre>\n              </CardBody>\n            </Card>\n          </Collapse>\n\n        </div>\n        : null}\n    </div>;\n  }\n\n  // static createValue(title, text)\n  // {\n  //   const date = new Date().getTime();\n  //   return {\n  //     data: {\n  //       type: 'staticPage',\n  //       attributes: {\n  //         title: title,\n  //         content: text\n  //       }\n  //     },\n  //     meta: {_ts_: date}\n  //   }\n  // }\n\n}\n\n// StaticPage.defaultProps = {\n//   value: ''\n// };\n\nErrorPane.propTypes =  {\n  value: PropTypes.shape({\n    errors: PropTypes.array.isRequired,\n    meta: PropTypes.shape({\n      _ts_: PropTypes.isRequired,\n    }),\n    links: PropTypes.object.isRequired,\n  }),\n};\n\nexport default ErrorPane;","const formsCollection = {\n  types: {},\n\n  getForm(formName) {\n    return this.types[formName];\n  },\n\n  registerForm(formName, component) {\n    this.types[formName] = component;\n  }\n};\n\nexport default formsCollection;\n","const tablesCollection = {\n  types: {},\n\n  getTable(tableName) {\n    return this.types[tableName];\n  },\n\n  registerTable(tableName, component) {\n    this.types[tableName] = component;\n  }\n};\n\nexport default tablesCollection;\n","import be5                 from '../be5';\r\nimport changeDocument      from '../core/changeDocument';\r\nimport Preconditions       from '../preconditions';\r\nimport StaticPage          from '../components/StaticPage';\r\nimport ErrorPane           from \"../components/ErrorPane\";\r\nimport Table               from \"../components/tables/Table\";\r\nimport tablesCollection   from './tablesCollection';\r\n\r\n\r\nexport default\r\n{\r\n  load(params, documentName) {\r\n    this._send(params, this._performData, documentName);\r\n  },\r\n\r\n  refresh(params, documentName) {\r\n    this._send(params, (json, documentName) => {\r\n      if(json.data !== undefined){\r\n        changeDocument(documentName, { component: Table, value: json });\r\n      }else{\r\n        changeDocument(documentName, { component: ErrorPane, value: json });\r\n      }\r\n    }, documentName);\r\n  },\r\n\r\n  _send(params, performData, documentName) {\r\n    Preconditions.passed(params.entity);\r\n    Preconditions.passed(params.query);\r\n\r\n    const requestParams = {\r\n      entity: params.entity,\r\n      query: params.query,\r\n      values: be5.net.paramString(params.params),\r\n      _ts_: new Date().getTime()\r\n    };\r\n\r\n    be5.net.request('document', requestParams, json => {\r\n      performData(json, documentName);\r\n    }, (data)=> {\r\n      changeDocument(documentName, { component: StaticPage, value: StaticPage.createValue(data.value.code, data.value.message)});\r\n    });\r\n  },\r\n\r\n  _performData(json, documentName)\r\n  {\r\n    if(json.data !== undefined){\r\n      const tableComponentName = json.data.attributes.layout.type || 'table';\r\n      const tableComponent = tablesCollection.getTable(tableComponentName);\r\n\r\n      if(tableComponent === undefined){\r\n        changeDocument(documentName, { component: StaticPage,\r\n          value: StaticPage.createValue(be5.messages.tableComponentNotFound + tableComponentName, '', json.meta, json.links)});\r\n      }else{\r\n        changeDocument(documentName, { component: tableComponent, value: json });\r\n      }\r\n    }else{\r\n      changeDocument(documentName, { component: ErrorPane, value: json });\r\n    }\r\n  }\r\n}\r\n","import React, {Component} from 'react';\nimport ReactDOM        from 'react-dom';\nimport be5             from '../../be5';\n\n\nclass OperationBox extends React.Component\n{\n  constructor(props) {\n    super(props);\n  };\n\n  onClick(name, e) {\n    if (!$(ReactDOM.findDOMNode(this.refs[name])).hasClass('disabled')) {\n      const operation = this.props.operations.find(operation => operation.name === name);\n      if (!operation.requiresConfirmation || confirm(operation.title + \"?\")) {\n        this.props.onOperationClick(name);\n      }\n    }\n    e.preventDefault();\n  }\n\n  refreshEnablement() {\n    this.props.operations.forEach(operation => {\n      let visible = false;\n      switch (operation.visibleWhen) {\n        case 'always':\n          visible = true;\n          break;\n        case 'oneSelected':\n          visible = (be5.tableState.selectedRows.length === 1);\n          break;\n        case 'anySelected':\n          visible = (be5.tableState.selectedRows.length !== 0);\n          break;\n        case 'hasRecords':\n          visible = this.props.hasRows;\n          break;\n      }\n      if (visible) {\n        $(ReactDOM.findDOMNode(this.refs[operation.name])).addClass('enabled');\n        $(ReactDOM.findDOMNode(this.refs[operation.name])).removeClass('disabled');\n      } else {\n        $(ReactDOM.findDOMNode(this.refs[operation.name])).addClass('disabled');\n        $(ReactDOM.findDOMNode(this.refs[operation.name])).removeClass('enabled');\n      }\n    });\n  }\n\n  render() {\n    const splitWithSpaces = (elements) => {\n      const out = [];\n      _(elements).each(e => {\n        if (out.length !== 0) {\n          out.push(' ');\n        }\n        out.push(e);\n      });\n      return out;\n    };\n    const operations = this.props.operations.map(operation => {\n//      if (operation.isClientSide) {\n//        const action = Action.parse(operation.action);\n//        const attrs = {\n//          key: operation.name,\n//          ref: operation.name,\n//          href: action.href,\n//          target: action.target,\n//          className: 'btn btn-secondary'\n//        };\n//        return React.createElement('a', attrs, operation.title);\n//      }\n      return (\n        <button key={operation.name} ref={operation.name} onClick={this.onClick.bind(this, operation.name)} className={'btn btn-secondary btn-secondary-old btn-sm'}>\n          {operation.title}\n        </button>\n      );\n    });\n\n    if(this.props.operations.length === 0){\n      return (\n        <div/>\n      );\n    }\n    return (\n      <div className={'operationList'}>{splitWithSpaces(operations)}</div>\n    );\n  }\n}\n\nexport default OperationBox;","import React, {Component} from 'react';\n\n\nclass QuickColumns extends React.Component\n{\n  constructor(props) {\n    super(props);\n\n    this.state = this.createStateFromProps(this.props);\n  };\n\n  componentWillReceiveProps(nextProps){\n    this.setState(this.createStateFromProps(nextProps));\n  }\n\n  createStateFromProps(props){\n    return {quickColumns:\n      props.firstRow\n        .map( (col, idx) => {\n          if(col.options.quick)\n            return {columnId: idx, visible: col.options.quick.visible === 'true'};\n          else return null;\n        })\n        .filter((col) => {return col !== null})\n    };\n  }\n\n  setTable(_table){\n    this.setState({table: _table});\n  }\n\n  quickHandleChange(idx) {\n    this.state.quickColumns[idx].visible = !this.state.quickColumns[idx].visible;\n    this.forceUpdate();\n  }\n\n  render() {\n    if(this.state.quickColumns.length === 0){\n      return (<div/>)\n    }\n    if(this.state.table){\n      const dataTable = $(this.state.table).find('table').dataTable();\n      const columnsCount = dataTable.fnSettings().aoColumns.length ;\n      this.state.quickColumns.forEach((col) => {\n        const columnId = col.columnId + (this.props.selectable ? 1 : 0);\n        if(columnId < columnsCount){\n          const dtColumn = dataTable.api().column( columnId );\n          if(dtColumn.visible)dtColumn.visible( col.visible );\n        }\n      });\n    }\n\n    const checks = this.state.quickColumns.map(function(cell, idx) {\n      const column = this.props.columns[cell.columnId];\n      const title = column.replace(/<br\\s*[\\/]?>/gi, \" \");\n      return (\n        <span key={idx}>\n            <input id={\"quick\" + idx} type=\"checkbox\" checked={cell.visible} onChange={() => this.quickHandleChange(idx)} />\n            <label htmlFor={\"quick\" + idx} className=\"rowIndex\">{title} </label>\n        </span>\n      );\n    }.bind(this));\n\n    return (\n      <div id=\"quickColumns\">\n        <span>Другие колонки:</span>\n        {checks}\n      </div>\n    )\n  }\n}\n\nexport default QuickColumns;","import React, {Component} from 'react';\nimport PropTypes          from 'prop-types';\nimport ReactDOM           from 'react-dom';\nimport be5                from '../../be5';\nimport tablesCollection   from '../../services/tablesCollection';\nimport utils              from '../../utils';\nimport forms              from '../../services/forms';\nimport tables             from '../../services/tables';\nimport numberFormatter    from 'number-format.js';\nimport OperationBox       from './OperationBox';\nimport QuickColumns       from './QuickColumns';\n\n\nconst formatCell = (data, options, isColumn) =>\n{\n  if (!Array.isArray(data)) {\n    if (data === '') {\n      if (options && options.blankNulls && options.blankNulls.value)\n        return options.blankNulls.value;\n    }\n  }else{\n    data = data.map(row => row.join(', ')).join('<br/>');\n  }\n\n  if(options){\n    if(options.format){\n      data = numberFormatter(options.format.mask, data);\n    }\n    if(!isColumn && options.link) {\n      data = $('<a>',{\n        text: data,\n        href: \"#!\" + options.link.url\n      });\n    }\n    if(options.css || options === 'th') {\n      const wrap = $('<div>');\n      if(options.css && options.css.class) wrap.addClass(options.css.class);\n      if(options === 'th')wrap.addClass(\"ta-center td-strong\");\n      data = wrap.html(data);\n    }\n  }\n  if(data instanceof $){\n    data = $('<div>').append($(data).clone()).html();\n  }\n  return data;\n};\n\nclass TableBox extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onOperationClick = this.onOperationClick.bind(this);\n  }\n\n  componentDidMount() {\n    if(this.refs.table)\n      this.applyTableStyle(ReactDOM.findDOMNode(this.refs.table));\n\n    this._refreshEnablementIfNeeded();\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return JSON.stringify(nextProps) !== JSON.stringify(this.props)\n      || JSON.stringify(nextState) !== JSON.stringify(this.state);\n  }\n\n  componentDidUpdate() {\n    if(this.refs.table)\n      this.applyTableStyle(ReactDOM.findDOMNode(this.refs.table));\n  }\n\n  onOperationClick(name) {\n    const attr = this.props.value.data.attributes;\n\n    const params = {\n      entity: attr.category,\n      query: attr.page || 'All records',\n      operation: name,\n      values: {},\n      operationParams: attr.parameters\n    };\n\n    forms.load(params, {\n      documentName: this.props.frontendParams.operationDocumentName || this.props.frontendParams.documentName,\n      parentDocumentName: this.props.frontendParams.documentName\n    });\n  }\n\n  onSelectionChange() {\n    this._refreshEnablementIfNeeded();\n\n    if (this.props.hasOwnProperty('callbacks') && this.props.callbacks !== undefined\n      && this.props.callbacks.hasOwnProperty('onSelectionChange'))\n    {\n      this.props.callbacks.onSelectionChange(be5.tableState.selectedRows);\n    }\n  }\n  applyTableStyle(node) {\n    // see http://datatables.net/examples/index\n    $(node).empty();\n    const attributes = this.props.value.data.attributes;\n    if (attributes.columns.length === 0) return;\n\n    const _this = this;\n    be5.tableState.selectedRows = [];\n\n    const thead = $('<thead>');\n    const theadrow = $('<tr>').appendTo(thead);\n    const tbody = $('<tbody>');\n    const tfoot = $('<tfoot>');\n    const tfootrow = $('<tr>').appendTo(tfoot);\n    const hasCheckBoxes = attributes.selectable;\n    const editable = attributes.operations.filter((op) => op.name === 'Edit').length === 1;\n    let columnIndexShift = 0;\n\n    if (hasCheckBoxes) {\n      theadrow.append($(\"<th>\").text(\"#\"));\n      tfootrow.append($(\"<th>\").text(\"#\"));\n      columnIndexShift = 1;\n    }\n\n    attributes.columns.forEach((column, idx) => {\n      const title = typeof column === 'object' ? column.title : column;\n      theadrow.append($(\"<th>\").html( formatCell(title, 'th', true) ));\n      tfootrow.append($(\"<th>\").html( formatCell(title, 'th', true) ));\n    });\n    attributes.rows.forEach((row, rowId, rows) => {\n      const tr = $('<tr>');\n      row.cells.forEach((cell, idx) => {\n        tr.append($('<td>').html(formatCell(cell.content, cell.options)));\n      });\n      if (hasCheckBoxes) {\n        tr.prepend($('<td>').text(row.id));\n      }\n      tbody.append(tr);\n    });\n\n    const tableDiv = $('<table class=\"display compact\" cellspacing=\"0\"/>')\n      .append(thead)\n      .append(tbody)\n      .append( ( attributes.rows.length > 10 ? tfoot : ''))\n      .appendTo(node);\n\n    const lengths = [5,10,20,50,100,500,1000];\n    const pageLength = attributes.length;\n\n    if (lengths.indexOf(pageLength) === -1) {\n      lengths.push(pageLength);\n      lengths.sort(function(a,b) {return a-b;});\n    }\n\n    let language = null;\n    if(be5.locale.value !== 'en'){\n      language = be5.messages.dataTables;\n    }\n\n    const tableConfiguration = {\n      processing: true,\n      serverSide: true,\n      language: language,\n      searching: false,\n      autoWidth: false,\n      aaSorting: [],\n      ajax: {\n        url: utils.getBaseUrl() + be5.net.url('document/moreRows'),\n        data: {\n          entity: attributes.category,\n          query: attributes.page,\n          values: be5.net.paramString(attributes.parameters),\n          selectable: attributes.selectable,\n          totalNumberOfRows: attributes.totalNumberOfRows\n        },\n        dataSrc: function(d){\n          if(d.type === \"error\"){\n            be5.log.error(d.value.code + \"\\n\" + d.value.message);\n          }else{\n            for(let i=0; i < d.data.length; i++){\n              for(let j=0; j < d.data[0].length - columnIndexShift; j++){\n                d.data[i][j + columnIndexShift] = formatCell(d.data[i][j + columnIndexShift].content, d.data[i][j + columnIndexShift].options)\n              }\n            }\n          }\n          return d.data;\n        }\n      },\n      lengthMenu: lengths,\n      pageLength: pageLength,\n      // This both tells\n      // that the first bunch of data is already loaded (so no request is required), and\n      // which is the total length of the result.\n      // See https://datatables.net/reference/option/deferLoading\n      deferLoading: attributes.totalNumberOfRows,\n      columnDefs: [\n        {\n          render: (data, type, row, meta) => {\n            if (!hasCheckBoxes) {\n              return row[0]; // default behavior\n            }\n            const val = row[0];\n            const id = \"row-\" + val + \"-checkbox\";\n            let display = meta.row+1;\n            if(editable) {\n              display = '<a href=\"#!'+be5.url.create('form', [attributes.category, attributes.page, 'Edit'], {selectedRows: val})+'\">'+display+'</a>';\n            }\n            // Pure HTML! Have no idea how to convert some react.js to string.\n            return '\\\n                <input id=\"{id}\" type=\"checkbox\" class=\"rowCheckbox\"></input>\\\n                <label for=\"{id}\" class=\"rowIndex\"><span class=\"checkBox\" ></span>{val}</label>'\n              .replace('{id}', id)\n              .replace('{id}', id)\n              .replace('{val}', display);\n          },\n          targets: 0\n        }, {\n          render: (data, type, row) => {\n            if (type === 'display') {\n              const container = $('<div/>').html(formatCell(data));\n              //be5.ui.convertLinks(container);\n              return container.html();\n            }\n            return data;\n          },\n          targets: \"_all\"\n        }\n      ],\n      createdRow(row, data, index) { // see http://datatables.net/examples/advanced_init/row_callback.html\n        $('input', row).change(function() {\n          const rowId = data[0];\n          const checked = this.checked;\n          if (checked && $.inArray(rowId, be5.tableState.selectedRows) == -1) {\n            be5.tableState.selectedRows.push(rowId);\n          } else if (!checked && $.inArray(rowId, be5.tableState.selectedRows) != -1) {\n            be5.tableState.selectedRows.splice($.inArray(rowId, be5.tableState.selectedRows), 1);\n          }\n          _this.onSelectionChange();\n        });\n      }\n    };\n    let groupingColumn = null;\n    const nColumns = attributes.rows[0].cells.length;\n    for (let i = 0; i < nColumns; i++) {\n      const column = attributes.rows[0].cells[i];\n      if (typeof column === 'object') {\n        if ('options' in column) {\n          if ('grouping' in column.options) {\n            groupingColumn = i;\n          }\n        }\n      }\n    }\n\n    // const hideControls = () => {\n    //   if ( $(_this.refs.table).find('.paging_simple_numbers span .paginate_button')\n    //     && $(_this.refs.table).find('.paging_simple_numbers span .paginate_button').length > 1) {\n    //     $(_this.refs.table).find('.dataTables_length').show();\n    //     $(_this.refs.table).find('.paging_simple_numbers').show()\n    //   } else {\n    //     $(_this.refs.table).find('.dataTables_length').hide();\n    //     $(_this.refs.table).find('.paging_simple_numbers').hide()\n    //   }\n    // };\n\n    let drawGrouping;\n\n    if (groupingColumn !== null) {\n      const resultGroupingColumn = columnIndexShift + groupingColumn;\n      tableConfiguration.columnDefs.push({ visible: false, targets: resultGroupingColumn });\n      drawGrouping = (api) => {\n        const rows = api.rows({ page:'current' }).nodes();\n        let last = null;\n\n        api.column(resultGroupingColumn, { page: 'current' }).data().each(function(group, i) {\n          if (last !== group) {\n            $(rows).eq(i).before('<tr class=\"table-group\"><td colspan=\"' + nColumns + '\">' + group + '</td></tr>');\n            last = group;\n          }\n        });\n      };\n    }\n\n    tableConfiguration.drawCallback = (settings) => {\n      if(this.refs && this.refs.table)\n      {\n        const dataTable = $(this.refs.table).find('table').dataTable();\n        if (groupingColumn !== null) drawGrouping(dataTable.api());\n      }\n      //hideControls();\n    };\n\n    tableDiv.dataTable(tableConfiguration);\n\n    tableDiv.on( 'draw.dt', function () {\n      be5.tableState.selectedRows = [];\n      _this._refreshEnablementIfNeeded();\n    } );\n\n    this.refs.quickColumns.setTable(this.refs.table);\n\n    this.onSelectionChange();\n  }\n\n  render() {\n    const attributes = this.props.value.data.attributes;\n    if (attributes.columns.length === 0) {\n      return (\n        <div>\n          <OperationBox ref=\"operations\" operations={attributes.operations} onOperationClick={this.onOperationClick} hasRows={attributes.rows.length !== 0}/>\n          {be5.messages.emptyTable}\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <OperationBox ref=\"operations\" operations={attributes.operations} onOperationClick={this.onOperationClick} hasRows={attributes.rows.length !== 0}/>\n        <QuickColumns ref=\"quickColumns\" columns={attributes.columns} firstRow={attributes.rows[0].cells} table={this.refs.table} selectable={attributes.selectable}/>\n        <div className=\"scroll\">\n          <div ref=\"table\"/>\n        </div>\n      </div>\n    );\n  }\n\n  _refreshEnablementIfNeeded() {\n    if (this.refs !== undefined && this.refs.operations !== undefined) {\n      this.refs.operations.refreshEnablement();\n    }\n  }\n}\n\n//todo add register new component and move to condo, add base types\nclass ListTableBox extends React.Component\n{\n  render(){\n    const list = this.props.value.data.attributes.rows.map( (col, idx) => {\n      return <li key={idx} dangerouslySetInnerHTML={ {__html: col.cells[0].content}}/>;\n    });\n\n    return (\n      <ul className=\"listTableBox\">\n        {list}\n      </ul>\n    );\n  }\n}\n\nclass Table extends React.Component\n{\n  constructor(props) {\n    super(props);\n\n    this.state = {runReload: \"\"}\n  }\n\n  render() {\n    const value = this.props.value;\n    //const reloadClass = \"table-reload float-xs-right \" + this.state.runReload;\n    let table = null;\n\n    if(value.data.attributes.parameters && value.data.attributes.parameters.displayType === 'list')\n    {\n      table = (\n        <ListTableBox ref=\"tableBox\" value={value} />\n      )\n    }\n    else\n    {\n      table = (\n        <TableBox\n          ref=\"tableBox\"\n          value={value}\n          frontendParams={this.props.frontendParams}\n        />\n      );\n    }\n\n    const TitleTag = `h${(value.data.attributes.parameters && value.data.attributes.parameters.titleLevel) || 1}`;\n\n    return (\n      <div className=\"table-component\">\n        <TitleTag className=\"table-component__title\">{value.data.attributes.title}</TitleTag>\n        {table}\n      </div>\n    );\n  }\n\n  refresh() {\n    const attr = this.props.value.data.attributes;\n    const params = {\n        entity: attr.category,\n        query: attr.page,\n        params: attr.parameters\n    };\n\n    tables.refresh(params, this.props.frontendParams.documentName);\n  }\n\n}\n\nTable.propTypes = {\n  value: PropTypes.object.isRequired\n};\n\ntablesCollection.registerTable('table', Table);\n\nexport default Table;\n","import be5              from '../be5';\nimport bus              from '../core/bus';\nimport Preconditions    from '../preconditions';\nimport changeDocument   from '../core/changeDocument';\nimport FinishedResult   from '../components/forms/FinishedResult';\nimport StaticPage       from '../components/StaticPage';\nimport ErrorPane        from '../components/ErrorPane';\nimport formsCollection  from './formsCollection.js';\nimport Table            from \"../components/tables/Table\";\n\n\nexport default\n{\n  apply(params, frontendParams) {\n    this._send('form/apply', params, frontendParams);\n  },\n\n  load(params, frontendParams) {\n    this._send('form', params, frontendParams);\n  },\n\n  _send(action, params, frontendParams){\n    Preconditions.passed(params.entity);\n    Preconditions.passed(params.query);\n    Preconditions.passed(params.operation);\n\n    let selectedRows = params.selectedRows;\n    if (!selectedRows) {\n      selectedRows = (params.operationParams === undefined || params.operationParams.selectedRows === undefined)\n        ? be5.tableState.selectedRows.join() : params.operationParams.selectedRows;\n    }\n    if (params.operationParams !== undefined && params.operationParams.selectedRows !== undefined) {\n      delete params.operationParams.selectedRows;\n    }\n\n    const requestParams = {\n      entity: params.entity,\n      query: params.query,\n      operation: params.operation,\n      values: be5.net.paramString(params.values),\n      operationParams: be5.net.paramString(params.operationParams),\n      selectedRows: selectedRows || '',\n      _ts_: new Date().getTime()\n    };\n\n    be5.net.request(action, requestParams, data => {\n      this._performOperationResult(data, frontendParams, params);\n    },(data)=> {\n      bus.fire(\"alert\", {msg: be5.messages.errorServerQueryException.replace('$message', data.value.code), type: 'error'});\n    });\n  },\n\n  _performOperationResult(json, frontendParams, applyParams)\n  {\n    const documentName = frontendParams.documentName;\n\n    Preconditions.passed(documentName);\n\n    if(json.data !== undefined)\n    {\n      switch (json.data.type) {\n        case 'form':\n          this._performForm(json, frontendParams);\n          return;\n        case 'operationResult':\n          const attributes = json.data.attributes;\n\n          if (attributes.status === 'error') {\n            bus.fire(\"alert\", {msg: attributes.message, type: 'error'});\n            return;\n          }\n\n          if(frontendParams.onSuccess){\n            frontendParams.onSuccess(json, applyParams);\n          }\n\n          if (attributes.status !== 'table' && frontendParams.parentDocumentName !== undefined\n                                            && frontendParams.parentDocumentName !== frontendParams.documentName)\n          {\n            console.log(\"bus.fire() \" + frontendParams.parentDocumentName + be5.documentRefreshSuffix);\n            bus.fire(frontendParams.parentDocumentName + be5.documentRefreshSuffix)\n          }\n\n          switch (attributes.status) {\n            case 'redirect':\n              bus.fire(\"alert\", {msg: be5.messages.successfullyCompleted, type: 'success'});\n              if(attributes.details === 'refreshAll' || attributes.details === 'refreshAllAndGoBack')\n              {\n                if(attributes.details === 'refreshAll'){\n                  be5.url.set(\"\");\n                }else{\n                  window.history.back();\n                }\n                bus.fire('LoggedIn');\n                if(documentName === be5.mainModalDocumentName)bus.fire(\"mainModalClose\");\n              }\n              else if(attributes.details.startsWith(\"http://\")\n                      || attributes.details.startsWith(\"https://\")\n                      || attributes.details.startsWith(\"ftp://\"))\n              {\n                window.location.href = attributes.details;\n              }\n              else\n              {\n                if (documentName === be5.mainDocumentName)\n                {\n                  be5.url.set(attributes.details);\n                }\n                else\n                {\n                  be5.url.process(documentName, '#!' + attributes.details);\n                }\n              }\n              return;\n            case 'finished':\n              if(documentName === be5.mainModalDocumentName) {\n                bus.fire(\"alert\", {msg: json.data.attributes.message || be5.messages.successfullyCompleted, type: 'success'});\n                bus.fire(\"mainModalClose\");\n              }else{\n                changeDocument(documentName, {component: FinishedResult, value: json, frontendParams: frontendParams});\n              }\n              return;\n            case 'table':\n              const tableJson = {\n                data: {\n                  attributes: attributes.details\n                },\n                meta: json.meta\n              };\n              changeDocument(frontendParams.parentDocumentName, {component: Table, value: tableJson});\n              if(documentName === be5.mainModalDocumentName) {\n                bus.fire(\"mainModalClose\");\n              }\n              return;\n            default:\n              bus.fire(\"alert\", {\n                msg: be5.messages.errorUnknownAction.replace('$action', 'status = ' + attributes.status),\n                type: 'error'\n              });\n            //changeDocument(documentName, {  value: be5.messages.errorUnknownAction.replace('$action', 'status = ' + attributes.status) });\n          }\n          return;\n        default:\n          bus.fire(\"alert\", {\n            msg: be5.messages.errorUnknownAction.replace('$action', 'data.type = ' + json.data.attributes.type),\n            type: 'error'\n          });\n        //changeDocument(documentName, { value: be5.messages.errorUnknownAction.replace('$action', 'data.type = ' + json.data.attributes.type) });\n      }\n    }else{\n      const error = json.errors[0];\n      bus.fire(\"alert\", {msg: error.status + \" \"+ error.title, type: 'error'});\n\n      changeDocument(documentName, {component: ErrorPane, value: json, frontendParams: frontendParams});\n    }\n  },\n\n  _performForm(json, frontendParams)\n  {\n    let operationResult = json.data.attributes.operationResult;\n\n    if(operationResult.status === 'error')\n    {\n      bus.fire(\"alert\", {msg: operationResult.message, type: 'error'});\n    }\n\n    const formComponentName = json.data.attributes.layout.type || 'form';\n    const formComponent = formsCollection.getForm(formComponentName);\n\n    if(formComponentName === 'modal' || frontendParams.documentName === be5.mainModalDocumentName)\n    {\n      bus.fire(\"mainModalOpen\");\n\n      changeDocument(be5.mainModalDocumentName,\n        { component: formsCollection.getForm('modal'), value: json, frontendParams: frontendParams });\n    }\n    else\n    {\n      if(formComponent === undefined){\n        changeDocument(frontendParams.documentName, { component: StaticPage,\n          value: StaticPage.createValue(be5.messages.formComponentNotFound + formComponentName, '')});\n      }else{\n        changeDocument(frontendParams.documentName, { component: formComponent, value: json, frontendParams: frontendParams });\n      }\n    }\n  },\n\n  changeLocationHash(props)\n  {\n    if(props.frontendParams && props.frontendParams.documentName === be5.mainDocumentName\n                            && document.location.hash !== '#!' + props.value.links.self)\n    {\n      document.location.hash = '#!' + props.value.links.self;\n    }\n  },\n\n  getOperationParams(url, values = {})\n  {\n    const attr = be5.url.parse(url);\n\n    return {\n      entity: attr.positional[1],\n      query: attr.positional[2],\n      operation: attr.positional[3],\n      values: values,\n      operationParams: attr.named\n    };\n  }\n\n};\n","import React             from 'react';\nimport forms             from '../services/forms';\nimport actionsCollection from '../services/actionsCollection'\n\n\nconst action = function(documentName, entity, query, operation, operationParams) {\n\n  const params = {\n    entity: entity,\n    query: query || 'All records',\n    operation: operation,\n    values: {},\n    operationParams: operationParams\n  };\n\n  forms.load(params, {documentName: documentName});\n};\n\nactionsCollection.registerAction(\"form\", action);\n\nexport default action;","import React          from 'react';\nimport be5            from '../be5';\nimport forms          from '../services/forms';\nimport actionsCollection from '../services/actionsCollection'\n\n\nconst action = function()\n{\n  forms.load(forms.getOperationParams('form/users/All records/Login'), {\n    documentName: be5.mainModalDocumentName\n  });\n};\n\nactionsCollection.registerAction(\"login\", action);\n\nexport default action;\n","import React          from 'react';\nimport be5            from '../be5'\nimport bus            from '../core/bus';\nimport forms          from '../services/forms';\nimport actionsCollection from '../services/actionsCollection'\n\n\nconst action = function() {\n  forms.load(forms.getOperationParams('form/users/All records/Logout'), {\n    documentName: be5.mainDocumentName, onSuccess: function (result, applyParams) {\n      //not used document.cookie = 'be_auth=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n\n      bus.fire('LoggedOut');\n      bus.fire('CallDefaultAction');\n    }\n\n  });\n\n};\n\nactionsCollection.registerAction(\"logout\", action);\n\nexport default action;","import React          from 'react';\nimport be5            from '../be5';\nimport changeDocument from '../core/changeDocument';\nimport StaticPage     from '../components/StaticPage';\nimport actionsCollection from '../services/actionsCollection'\n\n\nconst action = function(documentName, page)\n{\n  const requestParams = {\n    _ts_: new Date().getTime()\n  };\n\n  be5.net.request('static/' + page, requestParams, data => {\n    changeDocument(documentName, { component: StaticPage, value: data })\n  });\n};\n\nactionsCollection.registerAction(\"static\", action);\n\nexport default action;","import React             from 'react';\nimport tables            from '../services/tables';\nimport actionsCollection from '../services/actionsCollection'\n\n\nconst action = function(documentName, entity, query, params) {\n\n  const paramsObject = {\n    entity: entity,\n    query: query || 'All records',\n    params: params\n  };\n  tables.load(paramsObject, documentName);\n\n};\n\nactionsCollection.registerAction(\"table\", action);\n\nexport default action;","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport be5 from '../be5';\nimport bus from '../core/bus';\nimport documentState from '../core/documentState';\n\nimport reloadImg from '../../../images/reload.png';\n\n\nclass Document extends React.Component\n{\n  constructor(props) {\n    super(props);\n    this.state = { value: \"\" };\n\n    this.reload = this.reload.bind(this);\n    this.refresh = this.refresh.bind(this);\n  }\n\n  componentDidMount() {\n    bus.replaceListeners(this.props.frontendParams.documentName, data => {\n      if(this.state.value.meta !== undefined && !Number.isInteger(Number.parseInt(this.state.value.meta._ts_))){\n        console.error(\"meta._ts_ mast be string of Integer \" + this.state.value.meta._ts_);\n      }\n      if(this.state.value.meta === undefined || data.value.meta === undefined ||\n         data.value.meta._ts_ > this.state.value.meta._ts_){\n        if(!data.component){\n          data.component = undefined\n        }\n\n        const frontendParams = {\n          parentDocumentName: data.frontendParams ? data.frontendParams.parentDocumentName : undefined,\n          onSuccess: data.frontendParams ? data.frontendParams.onSuccess : undefined,\n        };\n\n        this.setState({\n          value: data.value,\n          component: data.component,\n          frontendParams: frontendParams\n        });\n      }\n      // if(!data.loading)this.setState({ loading: false });\n      // if(!data.error)this.setState({ error: null });\n    });\n\n    bus.replaceListeners(this.props.frontendParams.documentName + be5.documentRefreshSuffix, () => {\n      this.refresh();\n    });\n  }\n\n  componentWillUnmount(){\n    bus.replaceListeners(this.props.frontendParams.documentName, data => {});\n    bus.replaceListeners(this.props.frontendParams.documentName + be5.documentRefreshSuffix, data => {});\n  }\n\n  reload() {\n    if(this.state.value.links.self !== undefined)\n    {\n      be5.url.process(this.props.frontendParams.documentName, \"#!\" + this.state.value.links.self);\n    }\n  }\n\n  refresh() {\n    //console.log(\"refresh() \", JSON.stringify(this.props.frontendParams), JSON.stringify(this.state.frontendParams));\n    this.refs.documentContent.refresh();\n  }\n\n  render() {\n    documentState.set(this.props.frontendParams.documentName, this.state);\n\n    const loadingItem = null;//this.state.loading\n      //? (<div className={\"document-loader \" + (this.state.error ? \"error\" : \"\")}/>): null;\n\n    const devRole = false;//todo\n    const devTools = (\n      <span onClick={this.refresh} className={\"document-reload float-right\"}>\n        <img src={reloadImg} alt={be5.messages.reload}\n             title={be5.messages.reload + \" \" + this.props.frontendParams.documentName}/>\n      </span>\n    );\n\n    let contentItem = null;\n    if(this.state.value)be5.ui.setTitle(this.state.value.title);\n\n    if(this.state.component){\n      if (this.state.component === 'text')\n      {\n        contentItem = (\n           <h1>{this.state.value}</h1>\n        );\n      }else if (this.state.component !== null) {\n        const DocumentContent = this.state.component;\n        contentItem = (\n          <div>\n            {devRole ? devTools : null}\n            <DocumentContent\n                  ref=\"documentContent\"\n                  value={this.state.value}\n                  frontendParams={Object.assign({}, this.props.frontendParams, this.state.frontendParams)}\n            />\n          </div>\n        )\n      }\n    }else{\n      if (this.state.value) {\n        contentItem = (\n          <h1>{this.state.value}</h1>\n        );\n      }\n    }\n\n    return (\n      <div className='document-content' id={'document-content___' + this.props.frontendParams.documentName}>\n        {loadingItem}\n        {contentItem}\n      </div>\n    );\n  }\n\n}\n\nDocument.propTypes = {\n  frontendParams: PropTypes.shape({\n    documentName: PropTypes.string.isRequired,\n    operationDocumentName: PropTypes.string,\n    parentDocumentName: PropTypes.string,\n    onSuccess: PropTypes.function\n  })\n};\n\nexport default Document;\n","ace.define(\"ace/mode/doc_comment_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"../lib/oop\");\nvar TextHighlightRules = acequire(\"./text_highlight_rules\").TextHighlightRules;\n\nvar DocCommentHighlightRules = function() {\n    this.$rules = {\n        \"start\" : [ {\n            token : \"comment.doc.tag\",\n            regex : \"@[\\\\w\\\\d_]+\" // TODO: fix email addresses\n        }, \n        DocCommentHighlightRules.getTagRule(),\n        {\n            defaultToken : \"comment.doc\",\n            caseInsensitive: true\n        }]\n    };\n};\n\noop.inherits(DocCommentHighlightRules, TextHighlightRules);\n\nDocCommentHighlightRules.getTagRule = function(start) {\n    return {\n        token : \"comment.doc.tag.storage.type\",\n        regex : \"\\\\b(?:TODO|FIXME|XXX|HACK)\\\\b\"\n    };\n};\n\nDocCommentHighlightRules.getStartRule = function(start) {\n    return {\n        token : \"comment.doc\", // doc comment\n        regex : \"\\\\/\\\\*(?=\\\\*)\",\n        next  : start\n    };\n};\n\nDocCommentHighlightRules.getEndRule = function (start) {\n    return {\n        token : \"comment.doc\", // closing comment\n        regex : \"\\\\*\\\\/\",\n        next  : start\n    };\n};\n\n\nexports.DocCommentHighlightRules = DocCommentHighlightRules;\n\n});\n\nace.define(\"ace/mode/mysql_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/mode/doc_comment_highlight_rules\",\"ace/mode/text_highlight_rules\"], function(acequire, exports, module) {\n\nvar oop = acequire(\"../lib/oop\");\nvar lang = acequire(\"../lib/lang\");\nvar DocCommentHighlightRules = acequire(\"./doc_comment_highlight_rules\").DocCommentHighlightRules;\nvar TextHighlightRules = acequire(\"./text_highlight_rules\").TextHighlightRules;\n\nvar MysqlHighlightRules = function() {\n\n    var mySqlKeywords = /*sql*/ \"alter|and|as|asc|between|count|create|delete|desc|distinct|drop|from|having|in|insert|into|is|join|like|not|on|or|order|select|set|table|union|update|values|where\" + \"|accessible|action|add|after|algorithm|all|analyze|asensitive|at|authors|auto_increment|autocommit|avg|avg_row_length|before|binary|binlog|both|btree|cache|call|cascade|cascaded|case|catalog_name|chain|change|changed|character|check|checkpoint|checksum|class_origin|client_statistics|close|coalesce|code|collate|collation|collations|column|columns|comment|commit|committed|completion|concurrent|condition|connection|consistent|constraint|contains|continue|contributors|convert|cross|current_date|current_time|current_timestamp|current_user|cursor|data|database|databases|day_hour|day_microsecond|day_minute|day_second|deallocate|dec|declare|default|delay_key_write|delayed|delimiter|des_key_file|describe|deterministic|dev_pop|dev_samp|deviance|directory|disable|discard|distinctrow|div|dual|dumpfile|each|elseif|enable|enclosed|end|ends|engine|engines|enum|errors|escape|escaped|even|event|events|every|execute|exists|exit|explain|extended|fast|fetch|field|fields|first|flush|for|force|foreign|found_rows|full|fulltext|function|general|global|grant|grants|group|groupby_concat|handler|hash|help|high_priority|hosts|hour_microsecond|hour_minute|hour_second|if|ignore|ignore_server_ids|import|index|index_statistics|infile|inner|innodb|inout|insensitive|insert_method|install|interval|invoker|isolation|iterate|key|keys|kill|language|last|leading|leave|left|level|limit|linear|lines|list|load|local|localtime|localtimestamp|lock|logs|low_priority|master|master_heartbeat_period|master_ssl_verify_server_cert|masters|match|max|max_rows|maxvalue|message_text|middleint|migrate|min|min_rows|minute_microsecond|minute_second|mod|mode|modifies|modify|mutex|mysql_errno|natural|next|no|no_write_to_binlog|offline|offset|one|online|open|optimize|option|optionally|out|outer|outfile|pack_keys|parser|partition|partitions|password|phase|plugin|plugins|prepare|preserve|prev|primary|privileges|procedure|processlist|profile|profiles|purge|query|quick|range|read|read_write|reads|real|rebuild|recover|references|regexp|relaylog|release|remove|rename|reorganize|repair|repeatable|replace|acequire|resignal|restrict|resume|return|returns|revoke|right|rlike|rollback|rollup|row|row_format|rtree|savepoint|schedule|schema|schema_name|schemas|second_microsecond|security|sensitive|separator|serializable|server|session|share|show|signal|slave|slow|smallint|snapshot|soname|spatial|specific|sql|sql_big_result|sql_buffer_result|sql_cache|sql_calc_found_rows|sql_no_cache|sql_small_result|sqlexception|sqlstate|sqlwarning|ssl|start|starting|starts|status|std|stddev|stddev_pop|stddev_samp|storage|straight_join|subclass_origin|sum|suspend|table_name|table_statistics|tables|tablespace|temporary|terminated|to|trailing|transaction|trigger|triggers|truncate|uncommitted|undo|uninstall|unique|unlock|upgrade|usage|use|use_frm|user|user_resources|user_statistics|using|utc_date|utc_time|utc_timestamp|value|variables|varying|view|views|warnings|when|while|with|work|write|xa|xor|year_month|zerofill|begin|do|then|else|loop|repeat\";\n    var builtins = \"by|bool|boolean|bit|blob|decimal|double|enum|float|long|longblob|longtext|medium|mediumblob|mediumint|mediumtext|time|timestamp|tinyblob|tinyint|tinytext|text|bigint|int|int1|int2|int3|int4|int8|integer|float|float4|float8|double|char|varbinary|varchar|varcharacter|precision|date|datetime|year|unsigned|signed|numeric|ucase|lcase|mid|len|round|rank|now|format|coalesce|ifnull|isnull|nvl\";\n    var variable = \"charset|clear|connect|edit|ego|exit|go|help|nopager|notee|nowarning|pager|print|prompt|quit|rehash|source|status|system|tee\";\n\n    var keywordMapper = this.createKeywordMapper({\n        \"support.function\": builtins,\n        \"keyword\": mySqlKeywords,\n        \"constant\": \"false|true|null|unknown|date|time|timestamp|ODBCdotTable|zerolessFloat\",\n        \"variable.language\": variable\n    }, \"identifier\", true);\n\n    \n    function string(rule) {\n        var start = rule.start;\n        var escapeSeq = rule.escape;\n        return {\n            token: \"string.start\",\n            regex: start,\n            next: [\n                {token: \"constant.language.escape\", regex: escapeSeq},\n                {token: \"string.end\", next: \"start\", regex: start},\n                {defaultToken: \"string\"}\n            ]\n        };\n    }\n\n    this.$rules = {\n        \"start\" : [ {\n            token : \"comment\", regex : \"(?:-- |#).*$\"\n        },  \n        string({start: '\"', escape: /\\\\[0'\"bnrtZ\\\\%_]?/}),\n        string({start: \"'\", escape: /\\\\[0'\"bnrtZ\\\\%_]?/}),\n        DocCommentHighlightRules.getStartRule(\"doc-start\"),\n        {\n            token : \"comment\", // multi line comment\n            regex : /\\/\\*/,\n            next : \"comment\"\n        }, {\n            token : \"constant.numeric\", // hex\n            regex : /0[xX][0-9a-fA-F]+|[xX]'[0-9a-fA-F]+'|0[bB][01]+|[bB]'[01]+'/\n        }, {\n            token : \"constant.numeric\", // float\n            regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n        }, {\n            token : keywordMapper,\n            regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n        }, {\n            token : \"constant.class\",\n            regex : \"@@?[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n        }, {\n            token : \"constant.buildin\",\n            regex : \"`[^`]*`\"\n        }, {\n            token : \"keyword.operator\",\n            regex : \"\\\\+|\\\\-|\\\\/|\\\\/\\\\/|%|<@>|@>|<@|&|\\\\^|~|<|>|<=|=>|==|!=|<>|=\"\n        }, {\n            token : \"paren.lparen\",\n            regex : \"[\\\\(]\"\n        }, {\n            token : \"paren.rparen\",\n            regex : \"[\\\\)]\"\n        }, {\n            token : \"text\",\n            regex : \"\\\\s+\"\n        } ],\n        \"comment\" : [\n            {token : \"comment\", regex : \"\\\\*\\\\/\", next : \"start\"},\n            {defaultToken : \"comment\"}\n        ]\n    };\n\n    this.embedRules(DocCommentHighlightRules, \"doc-\", [ DocCommentHighlightRules.getEndRule(\"start\") ]);\n    this.normalizeRules();\n};\n\noop.inherits(MysqlHighlightRules, TextHighlightRules);\n\nexports.MysqlHighlightRules = MysqlHighlightRules;\n});\n\nace.define(\"ace/mode/mysql\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/mysql_highlight_rules\"], function(acequire, exports, module) {\n\nvar oop = acequire(\"../lib/oop\");\nvar TextMode = acequire(\"../mode/text\").Mode;\nvar MysqlHighlightRules = acequire(\"./mysql_highlight_rules\").MysqlHighlightRules;\n\nvar Mode = function() {\n    this.HighlightRules = MysqlHighlightRules;\n    this.$behaviour = this.$defaultBehaviour;\n};\noop.inherits(Mode, TextMode);\n\n(function() {       \n    this.lineCommentStart = [\"--\", \"#\"]; // todo space\n    this.blockComment = {start: \"/*\", end: \"*/\"};\n\n    this.$id = \"ace/mode/mysql\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n});\n","ace.define(\"ace/theme/xcode\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(acequire, exports, module) {\n\nexports.isDark = false;\nexports.cssClass = \"ace-xcode\";\nexports.cssText = \"\\\n.ace-xcode .ace_gutter {\\\nbackground: #e8e8e8;\\\ncolor: #333\\\n}\\\n.ace-xcode .ace_print-margin {\\\nwidth: 1px;\\\nbackground: #e8e8e8\\\n}\\\n.ace-xcode {\\\nbackground-color: #FFFFFF;\\\ncolor: #000000\\\n}\\\n.ace-xcode .ace_cursor {\\\ncolor: #000000\\\n}\\\n.ace-xcode .ace_marker-layer .ace_selection {\\\nbackground: #B5D5FF\\\n}\\\n.ace-xcode.ace_multiselect .ace_selection.ace_start {\\\nbox-shadow: 0 0 3px 0px #FFFFFF;\\\n}\\\n.ace-xcode .ace_marker-layer .ace_step {\\\nbackground: rgb(198, 219, 174)\\\n}\\\n.ace-xcode .ace_marker-layer .ace_bracket {\\\nmargin: -1px 0 0 -1px;\\\nborder: 1px solid #BFBFBF\\\n}\\\n.ace-xcode .ace_marker-layer .ace_active-line {\\\nbackground: rgba(0, 0, 0, 0.071)\\\n}\\\n.ace-xcode .ace_gutter-active-line {\\\nbackground-color: rgba(0, 0, 0, 0.071)\\\n}\\\n.ace-xcode .ace_marker-layer .ace_selected-word {\\\nborder: 1px solid #B5D5FF\\\n}\\\n.ace-xcode .ace_constant.ace_language,\\\n.ace-xcode .ace_keyword,\\\n.ace-xcode .ace_meta,\\\n.ace-xcode .ace_variable.ace_language {\\\ncolor: #C800A4\\\n}\\\n.ace-xcode .ace_invisible {\\\ncolor: #BFBFBF\\\n}\\\n.ace-xcode .ace_constant.ace_character,\\\n.ace-xcode .ace_constant.ace_other {\\\ncolor: #275A5E\\\n}\\\n.ace-xcode .ace_constant.ace_numeric {\\\ncolor: #3A00DC\\\n}\\\n.ace-xcode .ace_entity.ace_other.ace_attribute-name,\\\n.ace-xcode .ace_support.ace_constant,\\\n.ace-xcode .ace_support.ace_function {\\\ncolor: #450084\\\n}\\\n.ace-xcode .ace_fold {\\\nbackground-color: #C800A4;\\\nborder-color: #000000\\\n}\\\n.ace-xcode .ace_entity.ace_name.ace_tag,\\\n.ace-xcode .ace_support.ace_class,\\\n.ace-xcode .ace_support.ace_type {\\\ncolor: #790EAD\\\n}\\\n.ace-xcode .ace_storage {\\\ncolor: #C900A4\\\n}\\\n.ace-xcode .ace_string {\\\ncolor: #DF0002\\\n}\\\n.ace-xcode .ace_comment {\\\ncolor: #008E00\\\n}\\\n.ace-xcode .ace_indent-guide {\\\nbackground: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==) right repeat-y\\\n}\";\n\nvar dom = acequire(\"../lib/dom\");\ndom.importCssString(exports.cssText, exports.cssClass);\n});\n","import React          from 'react';\n//import brace from 'brace';\nimport be5            from '../be5';\nimport Document       from './Document';\nimport Tables         from '../services/tables';\nimport AceEditor from 'react-ace';\nimport SplitPane from 'react-split-pane';\n\nimport 'brace/mode/mysql';\nimport 'brace/theme/xcode';\n\n\nclass QueryBuilder extends React.Component\n{\n  constructor(props) {\n    super(props);\n    this.state = {\n      sql: this.props.value.included[0].attributes.sql,\n      finalSql: this.props.value.included[0].attributes.finalSql\n    };\n\n    this.updateCode = this.updateCode.bind(this);\n  }\n\n  componentDidMount(){\n    this.update(this.props.value);\n  }\n\n  componentWillReceiveProps(nextProps){\n    this.update(nextProps.value);\n  }\n\n  updateCode(newSql){\n    this.setState({\n      sql: newSql,\n    });\n\n    be5.net.request('queryBuilder', { sql: newSql, _ts_: new Date().getTime(), values: this.props.value.params }, json => {\n      this.update(json);\n    });\n\t}\n\n\tupdate(json){\n    this.setState({\n      finalSql: json.included[0].attributes.finalSql,\n    });\n    Tables._performData(json, 'queryBuilder-table');\n  }\n\n  render() {\n\n    return (\n      <div className=\"queryBuilder\">\n        <h1>Query Builder</h1>\n        <SplitPane split=\"horizontal\" defaultSize={300} >\n\n          <AceEditor\n            value={this.state.sql}\n            mode=\"mysql\"\n            theme=\"xcode\"\n            fontSize={13}\n            onChange={this.updateCode}\n            name=\"UNIQUE_ID_OF_DIV\"\n            width='100%'\n            height='100%'\n            editorProps={{\n              $blockScrolling: true,\n              enableBasicAutocompletion: true,\n              enableLiveAutocompletion: true,\n              enableSnippets: true,\n              showLineNumbers: true,\n              tabSize: 2,\n            }}\n          />\n          <div>\n            <br/>\n            <Document frontendParams={{documentName: \"queryBuilder-table\"}} />\n            <h2>Final sql</h2>\n            <pre>{this.state.finalSql}</pre>\n          </div>\n        </SplitPane>\n\n      </div>\n    );\n    //<button>Выполнить</button>\n  }\n}\n\nexport default QueryBuilder;","import React          from 'react';\nimport be5            from '../be5';\nimport changeDocument from '../core/changeDocument';\nimport QueryBuilder   from '../components/QueryBuilder';\nimport actionsCollection from '../services/actionsCollection'\n\n\nconst action = function(documentName, params)\n{\n  const requestParams = {\n    values: be5.net.paramString(params),\n    _ts_: new Date().getTime()\n  };\n\n  be5.net.request('queryBuilder', requestParams, data => {\n    changeDocument(documentName, { component: QueryBuilder, value: Object.assign({}, data, {params: be5.net.paramString(params)}) })\n  });\n};\n\nactionsCollection.registerAction(\"qBuilder\", action);\n\nexport default action;","import React          from 'react';\nimport changeDocument from '../core/changeDocument';\nimport actionsCollection from '../services/actionsCollection'\n\n\nconst action = function(documentName, text)\n{\n  changeDocument(documentName, { value: text });\n};\n\nactionsCollection.registerAction(\"text\", action);\n\nexport default action;","import React, {Component}   from 'react';\nimport PropTypes            from 'prop-types';\nimport be5                  from '../be5';\nimport Document             from './Document';\nimport { Collapse, Button } from 'reactstrap';\nimport classnames           from 'classnames';\n\n\nclass HelpInfo extends React.Component\n{\n  constructor(props){\n    super();\n    this.state = {isOpen: props.isOpen};\n\n    this.helpCollapseToggle = this.helpCollapseToggle.bind(this);\n  }\n\n  componentDidMount(){\n    if (this.props.value) {\n      be5.url.process(this.props.documentName, \"#!\" + this.props.value);\n    }\n  }\n\n  componentDidUpdate(){\n    if (this.props.value) {\n      be5.url.process(this.props.documentName, \"#!\" + this.props.value);\n    }\n  }\n\n  helpCollapseToggle() {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  render() {\n    if (this.props.value) {\n      return (\n        <div className='helpInfo clearfix'>\n          <Button color=\"info\" className={classnames('btn-sm', this.props.className)}\n                  onClick={this.helpCollapseToggle} >\n            {be5.messages.helpInfo}\n          </Button>\n\n          <Collapse isOpen={this.state.isOpen} tag={this.props.tag} >\n            <div className=\"alert alert-success max-width-970\" role=\"alert\">\n              <Document frontendParams={{documentName: this.props.documentName}} />\n            </div>\n          </Collapse>\n        </div>\n      )\n    } else {\n      return null;\n    }\n  }\n}\n\nHelpInfo.propTypes = {\n  value: PropTypes.string,\n  documentName: PropTypes.string,\n  isOpen: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.node,\n};\n\nHelpInfo.defaultProps = {\n  isOpen: false,\n  tag: 'div',\n  documentName: \"helpInfo\",\n};\n\nexport default HelpInfo;","import React            from 'react';\nimport PropTypes        from 'prop-types';\nimport be5              from '../../be5';\nimport tablesCollection from '../../services/tablesCollection';\nimport Document         from '../Document';\nimport Table            from './Table';\nimport changeDocument   from '../../core/changeDocument';\nimport forms            from '../../services/forms';\nimport StaticPage       from '../../components/StaticPage';\nimport HelpInfo         from '../../components/HelpInfo';\n\n\nclass TableForm extends React.Component\n{\n  constructor(){\n    super();\n    this.state = {helpCollapse: false};\n  }\n\n  componentDidUpdate(){\n    this.updateDocuments();\n  }\n\n  componentDidMount(){\n    this.updateDocuments();\n  }\n\n  updateDocuments(){\n    changeDocument(\"form\", { value: \"\" } );\n    changeDocument(\"table\", { component: Table, value: this.props.value });\n  }\n\n  render() {\n    return (\n      <div className=\"table-form\">\n        <Document frontendParams={{documentName: \"table\", operationDocumentName: \"form\"}} />\n        <HelpInfo value={this.props.value.data.attributes.layout.helpInfo} />\n        <Document frontendParams={{documentName: \"form\"}} />\n      </div>\n    );\n  }\n\n  refresh() {\n    if(this.props.value.links.self !== undefined) {\n      be5.url.process(this.props.frontendParams.documentName, \"#!\" + this.props.value.links.self);\n    }\n  }\n\n}\n\ntablesCollection.registerTable('tableForm', TableForm);\n\nexport default TableForm;\n","import React            from 'react';\nimport Document         from '../Document';\nimport TableForm        from './TableForm';\nimport tablesCollection from '../../services/tablesCollection';\n\n\nclass TableFormRow extends TableForm {\n\n  render() {\n    return (\n      <div className=\"row\">\n        <div className=\"col-lg-6\">\n          <Document frontendParams={{documentName: \"table\", operationDocumentName: \"form\"}} />\n        </div>\n        <div className=\"col-lg-6\">\n          <Document frontendParams={{documentName: \"form\"}} />\n        </div>\n      </div>\n    );\n  }\n\n}\n\ntablesCollection.registerTable('tableFormRow', TableFormRow);\n\nexport default TableFormRow;\n","import React            from 'react';\nimport Document         from '../Document';\nimport TableForm        from './TableForm';\nimport tablesCollection from '../../services/tablesCollection';\n\n\nclass FormTable extends TableForm {\n\n  render() {\n    return (\n      <div className=\"form-table\">\n        <Document frontendParams={{documentName: \"form\"}} />\n        <Document frontendParams={{documentName: \"table\", operationDocumentName: \"form\"}} />\n     </div>\n    );\n  }\n\n}\n\ntablesCollection.registerTable('formTable', FormTable);\n\nexport default FormTable;\n","import React from 'react';\nimport PropTypes            from 'prop-types';\nimport classNames           from 'classnames';\nimport Datetime             from 'react-datetime';\nimport moment               from 'moment';\nimport Select, { Creatable }from 'react-select';\nimport VirtualizedSelect    from 'react-virtualized-select'\nimport NumericInput         from 'react-numeric-input';\nimport CKEditor             from 'react-ckeditor-component';\nimport MaskedInput          from 'react-maskedinput';\n\n\nclass Property extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.onDateChange = this.onDateChange.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeMulti = this.handleChangeMulti.bind(this);\n    this.numericHandleChange = this.numericHandleChange.bind(this);\n  }\n\n  handleChange(event) {\n    //console.log(this.props.path, Property._getValueFromEvent(event));\n    this.props.onChange(this.props.path, Property._getValueFromEvent(event));\n  }\n\n  handleChangeMulti(event) {\n    let selectArray = [];\n    Object.keys(event).forEach(function (key) {\n      selectArray.push(event[key].value);\n    });\n    this.props.onChange(this.props.path, selectArray);\n  }\n\n  numericHandleChange(valueAsNumber, valueAsString, input){\n    this.props.onChange(this.props.path, valueAsNumber);\n  }\n\n  static _getValueFromEvent(event) {\n    if(!event)\n      return '';\n    if(event._d)\n    {\n      console.log(Property.formatDate(event._d));\n      return Property.formatDate(event._d);\n    }\n    if(!event.target)\n      return event.value;\n    const element = event.target;\n    return (element.type === 'checkbox') ? element.checked : element.value;\n  }\n\n  static getBase64(file) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n    });\n  }\n\n  onDateChange(date){\n    //console.log(date);\n    if(typeof date === \"string\"){\n      if(date.match('(0[1-9]|[12][0-9]|3[01])\\.(0[1-9]|1[012])\\.(19|20)\\d\\d')){\n        //console.log(\"str 10: \" + date);\n        this.handleChange(date);\n      }\n    }else{\n      this.handleChange(date)\n    }\n  }\n\n  //todo error date status\n  // onDateChange(date){\n  //   //console.log(date);\n  //   if(typeof date === \"string\"){\n  //     if(date.match('(0[1-9]|[12][0-9]|3[01])\\.(0[1-9]|1[012])\\.(19|20)\\d\\d')){\n  //       //console.log(\"str 10: \" + date);\n  //       this.handleChange(date);\n  //       this.setState({status: 'none'});\n  //     }else{\n  //       this.handleChange(date);\n  //       this.setState({status: 'error'});\n  //     }\n  //   }else{\n  //     this.handleChange(date);\n  //     this.setState({status: 'none'});\n  //   }\n  // }\n\n  static getExtraAttrsMap(extraAttrs){\n    let map = {};\n    if(extraAttrs === undefined)return map;\n    for (let i=0 ;i< extraAttrs.length; i++){\n      map[extraAttrs[i][0]] = extraAttrs[i][1];\n    }\n    return map;\n  }\n\n  render() {\n    const meta  = this.props.meta;\n    const id    = this.props.name + \"Field\";\n\n    let valueControl = Property.getControl(this.props, this.handleChange, this.handleChangeMulti, this.numericHandleChange, this.onDateChange);\n\n    const label = <label htmlFor={id} className={meta.type === \"Boolean\" ? 'form-check-label' : 'form-control-label'}>\n      {meta.displayName || id}</label>;\n\n    const messageElement = meta.message ? <span className={this.props.messageClassName || \"form-control-feedback\"}>{meta.message}</span> : undefined;\n\n    let hasStatusClasses = classNames(\n      {'has-danger' : meta.status === 'error'},\n      {'has-warning' : meta.status === 'warning'},\n      {'has-success' : meta.status === 'success'},\n    );\n    if(this.state && this.state.status === 'error'){\n      hasStatusClasses = 'has-danger';\n    }\n    const classNameForm = (meta.type === \"Boolean\")\n      ? this.props.classNameFormCheck || 'form-check property'\n      : this.props.classNameFormGroup || 'form-group property';\n\n    const cssClasses = meta.cssClasses || 'col-lg-12';\n\n    const outerClasses = classNames(\n      cssClasses,\n      {'display-none' : meta.hidden}\n    );\n\n    const classes = classNames(\n      classNameForm,\n      hasStatusClasses,\n      {'required' : !meta.canBeNull}\n    );\n\n    if(meta.type === \"Boolean\")\n    {\n      return (\n        <div className={outerClasses}>\n          <div className={classes}>\n            {valueControl}\n            {label}\n            {messageElement}\n          </div>\n        </div>\n      );\n    }else if(meta.labelField){\n      return (\n        <div className={classNames('form-group property property-label', meta.cssClasses || 'col-lg-12', hasStatusClasses)}>{valueControl}</div>\n      );\n    }else{\n      return (\n        <div className={outerClasses}>\n          <div className={classes}>\n            {label}\n            <div className=\"controls\">\n              {valueControl}\n              {messageElement}\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  static getControl(props, handleChange, handleChangeMulti, numericHandleChange, onDateChange){\n    const meta  = props.meta;\n    const value = props.value;\n    const id    = props.name + \"Field\";\n    const handle = meta.multipleSelectionList ? handleChangeMulti : handleChange;\n    const extraAttrsMap = Property.getExtraAttrsMap(meta.extraAttrs);\n\n    const controls = {\n      Boolean: () => (\n        <input type=\"checkbox\" id={id} key={id} checked={value === true || value === \"true\"} onChange={handle}\n               className={props.controlClassName || 'form-check-input'} disabled={meta.readOnly} />\n      ),\n      select: () => {\n        const options = Property.optionsToArray(meta.tagList);\n        // VirtualizedSelect css подправить (на длинных строках с переносами)\n        let strValue;\n        if(Array.isArray(value)){\n          strValue = [];\n          for (let i = 0; i < value.length; i++)strValue.push(\"\" + value[i]);\n        }\n        else\n        {\n          strValue = \"\" + value;\n        }\n        const selectProps = {\n          ref: id, name: id, value: strValue, options: options, onChange: handle,\n          clearAllText: props.localization.clearAllText,\n          clearValueText: props.localization.clearValueText,\n          noResultsText: props.localization.noResultsText,\n          searchPromptText: props.localization.searchPromptText,\n          loadingPlaceholder: props.localization.loadingPlaceholder,\n          placeholder: meta.placeholder || props.localization.placeholder,\n          backspaceRemoves: false,\n          disabled: meta.readOnly,\n          multi: meta.multipleSelectionList,\n          matchPos: extraAttrsMap.matchPos || \"any\"\n        };\n\n        if(extraAttrsMap.inputType === \"Creatable\"){\n          return <Creatable {...selectProps} />\n        }\n\n        if(extraAttrsMap.inputType === \"VirtualizedSelect\"){\n          return <VirtualizedSelect {...selectProps} clearable searchable labelKey=\"label\" valueKey=\"value\" />\n        }\n        return <Select {...selectProps} />\n      },\n      Date: () => {\n        return <Datetime dateFormat=\"DD.MM.YYYY\" value={moment(value === undefined ? \"\" : value)}\n                         onChange={(v) => onDateChange(v)} id={id} key={id}\n                         timeFormat={false} closeOnSelect={true} closeOnTab={true} locale={props.localization.locale || \"en\"}\n                         inputProps={ {disabled: meta.readOnly} } />\n      },\n//      dateTime: {\n//        normal: () => {\n//          return ( React.createElement(Datetime, {id: id, key: id, value: value, parent: _this, onChange: handleChange, time: true, className: props.controlClassName}) );\n//        },\n//        readOnly: () => this.createStatic(value)\n//      },\n\n\n      textArea: () => {\n        return <textarea placeholder={meta.placeholder} id={id}  rows={meta.rows || 3} cols={meta.columns} value={value === undefined ? \"\" : value}\n                         onChange={handle} className={props.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      maskTest: () => {\n        return <MaskedInput mask={Property.getMaskInput(meta.validationRules)} onChange={handle} className={props.controlClassName || \"form-control\"} />\n      },\n      textInput: () => {\n        return <input type=\"text\" placeholder={meta.placeholder} id={id} key={id} value={value === undefined ? \"\" : value}\n                      onChange={handle} className={props.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      numberInput: () => {\n        const numericProps = Property.getNumericProps(meta);\n        return <NumericInput {...numericProps} placeholder={meta.placeholder} id={id} key={id} value={value}\n                             onChange={numericHandleChange} style={ false }\n                             className={props.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      passwordField: () => {\n        return <input type=\"password\" placeholder={meta.placeholder} id={id} key={id} value={value === undefined ? \"\" : value}\n                      onChange={handle} className={props.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      file: () => {\n        return <input type=\"file\" placeholder={meta.placeholder} id={id} key={id}\n                      className={props.controlClassName || \"form-control\"} disabled={meta.readOnly}\n                      multiple={meta.multipleSelectionList}\n                      onChange={(e) => {\n                        if(e.target.files && e.target.files.length === 1) {\n                          const fileName = e.target.files[0].name;\n                          Property.getBase64(e.target.files[0]).then(data => {\n                            handle({value: {type: \"Base64File\", name: fileName, data: data}})\n                          });\n                        }\n                      }\n                      } />\n      },\n\n      WYSIWYG: () => {\n        return <CKEditor activeClass=\"p10\" content={value}\n                         events={{\n                           \"change\": (evt) => { handle({value: evt.editor.getData()}) }\n                         }}\n                         config={{language: 'ru',}}\n        />\n      },\n      labelField: () => {\n        if(meta.rawValue)\n        {\n          return (<div dangerouslySetInnerHTML={{__html: value}} />)\n        }\n        else\n        {\n          return (<label className=\"form-control-label\">{value}</label>)\n        }\n      },\n    };\n\n    if(meta.tagList)\n    {\n      return controls['select']();\n    }\n\n    if(meta.passwordField)\n    {\n      return  controls['passwordField']();\n    }\n\n    if(meta.labelField)\n    {\n      return  controls['labelField']();\n    }\n\n    if(meta.validationRules !== undefined && Property.isNumberInput(meta.validationRules))\n    {\n      return controls['numberInput']()\n    }\n\n    if(controls[meta.type] !== undefined)\n    {\n      return controls[meta.type]();\n    }\n\n    if(extraAttrsMap.inputType === 'WYSIWYG')\n    {\n      return controls['WYSIWYG']();\n    }\n\n    if(extraAttrsMap.inputType === 'textArea')\n    {\n      return controls['textArea']();\n    }\n\n    if(extraAttrsMap.inputType === 'file')\n    {\n      return controls['file']();\n    }\n\n    if(meta.validationRules !== undefined && Property.getMaskInput(meta.validationRules))\n    {\n      return controls['maskTest']();\n    }\n\n    return controls['textInput']();\n  }\n\n  static getNumericProps(meta)\n  {\n    let props = {};\n    props['maxLength'] = 14;//errors if more\n    const rules = meta.validationRules;\n    for (let i =0 ; i< rules.length; i++)\n    {\n      if(rules[i].type === \"baseRule\" && (rules[i].attr === \"number\"))\n      {\n        props['precision'] = 10;\n      }\n      if(rules[i].type === \"baseRule\" && (rules[i].attr === \"integer\"))\n      {\n        props['min'] = -2147483648;\n        props['max'] = 2147483647;\n        props['maxLength'] = 10;\n      }\n      // if(rules[i].type === \"digits\")\n      // {\n      //   props['min'] = 0;//todo not work\n      // }\n    }\n    if(meta.columnSize){\n      props['maxLength'] = parseInt(meta.columnSize);\n    }\n    return props;\n  }\n\n  static getMaskInput(rules)\n  {\n    for (let i = 0; i < rules.length; i++)\n    {\n      if (\"mask\" in rules[i]) {\n        return rules[i].mask\n      }\n    }\n    return null;\n  }\n\n  static isNumberInput(rules)\n  {\n    for (let i =0 ; i< rules.length; i++)\n    {\n      if(rules[i].type === \"baseRule\" &&\n        ( rules[i].attr === \"digits\" || rules[i].attr === \"integer\" || rules[i].attr === \"number\" ))return true;\n    }\n    return false;\n  }\n\n  static optionsToArray(options){\n    let optionObject = [];\n    for(let i =0 ;i < options.length; i++){\n      optionObject.push({ value: options[i][0], label: options[i][1] });\n    }\n    return optionObject;\n  }\n\n//  createStatic(value) {\n//    return <p className=\"form-control-static\" dangerouslySetInnerHTML={{__html: value}} />;\n//  }\n\n  //ISO 8601 format\n  static formatDate(date){\n    const day = date.getDate();\n    const month = date.getMonth() + 1;\n    const year = date.getFullYear();\n    return year + '-' + Property.format2digit(month) + '-' + Property.format2digit(day);\n  }\n\n  static format2digit(number){\n    return (\"0\" + number).slice(-2);\n  }\n}\n\nProperty.defaultProps = {\n  localization: {\n    locale: 'en',\n    clearAllText: 'Clear all',\n    clearValueText: 'Clear value',\n    noResultsText: 'No results found',\n    searchPromptText: 'Type to search',\n    placeholder: 'Select ...',\n    loadingPlaceholder: 'Loading...'\n  },\n};\n\nProperty.propTypes = {\n  localization: PropTypes.object\n};\n\nexport default Property;\n","import React from 'react';\nimport PropTypes            from 'prop-types';\nimport Property             from './Property';\nimport JsonPointer          from 'json-pointer';\n\nclass PropertySet extends React.Component {\n\n  _createGroup(curGroup, curGroupId, curGroupName) {\n    return (\n      <div className='property-group col-12' key={curGroupId} ref={curGroupId}>\n        <div className='property-groop-box'>\n          <h3>{curGroupName}</h3>\n          <div className=\"row\">\n            {curGroup}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  get(path){\n    const itemName = path.substring(path.lastIndexOf(\"/\")+1);\n    const itemMeta = this.props.bean.meta[path];\n    const itemValue = JsonPointer.get(this.props.bean, \"/values\" + path);\n    return {\n      meta: itemMeta,\n      name: itemName,\n      value: itemValue,\n      path: path,\n      key: itemName + \"Property\",\n      ref: itemName + \"Property\",\n      localization: this.props.localization\n    }\n  }\n\n  render() {\n    let curGroup = [];\n    let curGroupName = null, curGroupId = null;\n    let fields = [];\n\n    const finishGroup = () => {\n      if(curGroup.length > 0) {\n        if(curGroupId) {\n          fields.push(this._createGroup(curGroup, curGroupId, curGroupName));\n        } else {\n          Array.prototype.push.apply(fields, curGroup);\n        }\n      }\n      curGroup = [];\n    };\n\n    for(const path of this.props.bean.order) {\n      const itemProps = this.get(path);\n\n      const newGroupId = itemProps.meta.groupId || null;\n      const newGroupName = itemProps.meta.groupName || null;\n      if(newGroupId !== curGroupId) {\n        finishGroup();\n        curGroupName = newGroupName;\n        curGroupId = newGroupId;\n      }\n      const field = (<Property {...itemProps} onChange={this.props.onChange} />);\n      curGroup.push(field);\n    }\n    finishGroup();\n\n    return (\n      <div className=\"property-set row\">\n        {fields}\n      </div>\n    );\n  }\n\n}\n\nPropertySet.defaultProps = {\n  localization: {},\n};\n\nPropertySet.propTypes = {\n  bean: PropTypes.object.isRequired,\n  onChange: PropTypes.func,\n  localization: PropTypes.object\n};\n\nexport default PropertySet;\n","import React                from 'react';\nimport PropTypes            from 'prop-types';\nimport be5                  from '../../be5';\nimport forms                from '../../services/forms';\nimport formsCollection      from '../../services/formsCollection';\nimport PropertySet          from '../properties/PropertySet';\nimport JsonPointer          from 'json-pointer';\nimport ErrorPane            from \"../ErrorPane\";\n\nconst Form = React.createClass({\n  propTypes: {\n    value: React.PropTypes.object.isRequired,\n    frontendParams: React.PropTypes.object.isRequired\n  },\n\n  displayName: 'Form',\n  \n  getInitialState() {\n    return _.extend({}, this.props.value, { allFieldsFilled: false });\n  },\n\n  componentDidMount() {\n    forms.changeLocationHash(this.props);\n\n    this.initForm();\n  },\n\n  initForm() {\n    for (let key in this.refs) {\n      if(this.refs[key].onFormDidMount)\n        this.refs[key].onFormDidMount();\n    }\n    this.setState({ allFieldsFilled: this._allFieldsFilled() });\n  },\n\n  componentWillReceiveProps(nextProps) {\n    this.setState(nextProps.value, () => {\n      this.setState({ allFieldsFilled: this._allFieldsFilled() });\n    });\n  },\n  \n  getFormValues() {\n    return this._getRawFormValues().filter(field => field.value !== null);\n  },\n\n  getParams(values){\n    const attributes = this.state.data.attributes;\n    return {\n      entity: attributes.entity,\n      query: attributes.query,\n      operation: attributes.operation,\n      operationParams: attributes.operationParams,\n      selectedRows: attributes.selectedRows,\n      values: values,\n    };\n  },\n\n  refresh() {\n    forms.load(this.getParams(this.state.data.attributes.bean.values), this.props.frontendParams);\n  },\n  \n  _reloadOnChange(controlName) {\n    const values = Object.assign({}, this.state.data.attributes.bean.values, { '_reloadcontrol_': controlName });\n\n    forms.load(this.getParams(values), this.props.frontendParams);\n  },\n\n  apply() {\n    forms.apply(this.getParams(this.state.data.attributes.bean.values), this.props.frontendParams);\n  },\n  \n  // cancel() {\n  //   be5.url.set(be5.url.create('table', [this.state.entity, this.state.query], this.state.parameters));\n  // },\n\n  _applyOnSubmit(e) {\n    // Hitting <enter> in any textbox in Chrome triggers the form submit,\n    // even when there is no submit button.\n    // That's why I explicitly define the cancellation.\n    e.preventDefault();\n    this.apply();\n  },\n  \n  _getRawFormValues() {\n    const attributes = this.state.data.attributes;\n    return attributes.bean.map(field => ({ name: field.name, value: field.value, required: !field.canBeNull }))\n  },\n  \n  _getRequredValues() {\n    return this._getRawFormValues().filter(field => field.required);\n  },\n  \n  _onFieldChange(name, value) {\n    const attributes = this.state.data.attributes;\n    JsonPointer.set(attributes.bean, \"/values\" + name, value);\n\n    this.forceUpdate(() => {\n      this.setState({ allFieldsFilled: this._allFieldsFilled() });\n      \n      if (attributes.bean.meta[name].hasOwnProperty('reloadOnChange') ||\n          attributes.bean.meta[name].hasOwnProperty('autoRefresh') ) {\n        this._reloadOnChange(name);\n      }\n    });\n  },\n\n  _createFormActions() {\n    if (this.state.hideActions === true) {\n      return null;\n    }\n    return (\n      <div>\n        {this._createOkAction()}\n        {' '}\n        {this._createCancelAction()}\n      </div>\n    );\n  },\n  \n  _createOkAction() {\n    return (\n      <button type=\"submit\" className=\"btn btn-primary\" disabled={!this.state.allFieldsFilled}>\n        {be5.messages.Submit}\n      </button>\n    );\n  },\n  \n  _createCancelAction() {\n    //const attributes = this.state.data.attributes;\n    if (!this.props.value.showCancel) {\n      return null;\n    }\n    \n    return (\n      <button type=\"button\" className=\"btn btn-secondary\" onClick={() => history.back()}>\n        {be5.messages.cancel}\n      </button>\n    );\n  },\n  \n  _allFieldsFilled() {\n    const attributes = this.state.data.attributes;\n    return attributes.bean.order.every(field => {\n      // if(be5.debug && !filled){\n      //   console.log(field);\n      // }\n      return attributes.bean.meta[field].hasOwnProperty('canBeNull') ||\n        JsonPointer.get(attributes.bean, \"/values\" + field) !== '';\n    });\n  },\n\n  _getErrorPane(){\n    const errorModel = this.state.data.attributes.errorModel;\n\n    if(errorModel){\n      return <ErrorPane value={{errors: [errorModel], meta: this.state.meta, links: {}}}/>\n    }else{\n      return null;\n    }\n  },\n\n  render() {\n    const attributes = this.state.data.attributes;\n\n    return (\n      <div className=\"row\">\n        <div className={'formBox ' + (attributes.layout.formBoxCssClasses || 'col-12 max-width-970 formBoxDefault')}>\n          <h1 className=\"form-component__title\">{attributes.title}</h1>\n          <form onSubmit={this._applyOnSubmit}>\n            <PropertySet bean={attributes.bean} onChange={this._onFieldChange} localization={be5.messages.property}/>\n            <div className=\"formActions\">\n              {this._createFormActions()}\n            </div>\n          </form>\n          <br/>\n        </div>\n        <div className=\"col-12\">\n          {this._getErrorPane()}\n        </div>\n      </div>\n    );\n    //<button onClick={this.refresh}>refresh</button>\n  }\n});\n\n// Form.propTypes = {\n//   value: PropTypes.object.isRequired\n// };\n\nformsCollection.registerForm('form', Form);\n\nexport default Form;\n\n","import React from 'react';\nimport PropTypes            from 'prop-types';\nimport classNames           from 'classnames';\nimport Datetime             from 'react-datetime';\nimport moment               from 'moment';\nimport Select               from 'react-select';\nimport VirtualizedSelect    from 'react-virtualized-select'\nimport JsonPointer          from 'json-pointer';\n\n\nclass PropertyInput extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeMulti = this.handleChangeMulti.bind(this);\n    this.onDateChange = this.onDateChange.bind(this);\n  }\n\n  static get(path, bean, localization){\n    const itemName = path.substring(path.lastIndexOf(\"/\")+1);\n    const itemMeta = bean.meta[path];\n    const itemValue = JsonPointer.get(bean, \"/values\" + path);\n    return {\n      meta: itemMeta,\n      name: itemName,\n      value: itemValue,\n      path: path,\n      key: itemName + \"Property\",\n      ref: itemName + \"Property\",\n      localization: localization\n    }\n  }\n\n  handleChange(event) {\n    let path;\n    if(this.props.path){\n      path = this.props.path;\n    }else{\n      path = this.props.bean.order[this.props.id];\n    }\n    this.props.onChange(path, this._getValueFromEvent(event));\n  }\n\n  onDateChange(date){\n      //console.log(date);\n      if(typeof date === \"string\"){\n          if(date.match('(0[1-9]|[12][0-9]|3[01])\\.(0[1-9]|1[012])\\.(19|20)\\d\\d')){\n              //console.log(\"str 10: \" + date);\n              this.handleChange(date);\n          }\n      }else{\n          this.handleChange(date)\n      }\n  }\n\n  handleChangeMulti(event) {\n    let selectArray = [];\n    Object.keys(event).forEach(function (key) {\n      selectArray.push(event[key].value);\n    });\n    this.props.onChange(this.props.path, selectArray);\n  }\n\n  _getValueFromEvent(event) {\n    if(!event)\n      return '';\n    if(event._d)\n    {\n      return this.formatDate(event._d);\n    }\n    if(!event.target)\n      return event.value;\n    const element = event.target;\n    return (element.type === 'checkbox') ? element.checked : element.value;\n  }\n\n  render() {\n    let attr;\n    if(this.props.path){\n      attr = PropertyInput.get(this.props.path, this.props.bean, this.props.localization)\n    }else{\n      attr = PropertyInput.get(this.props.bean.order[this.props.id], this.props.bean, this.props.localization)\n    }\n    const meta  = attr.meta;\n    const value = attr.value || attr.meta.defaultValue;\n    const id    = attr.name + \"Field\";\n    const handle = meta.multipleSelectionList ? this.handleChangeMulti : this.handleChange;\n\n    const controls = {\n      Boolean: () => (\n        <input type=\"checkbox\" id={id} key={id} value={value} checked={value === undefined ? \"\" : value} onChange={handle}\n                 className={attr.controlClassName || 'form-check-input'} disabled={meta.readOnly} />\n      ),\n      select: () => {\n        const options = this.optionsToArray(meta.tagList);\n        //if(options.length > 100){\n        let strValue;\n        if(Array.isArray(value)){\n          strValue = [];\n          for (let i = 0; i < value.length; i++)strValue.push(\"\" + value[i]);\n        }\n        else\n        {\n          strValue = \"\" + value;\n        }\n          return <VirtualizedSelect ref={id} name={id} value={strValue} options={options}\n                          disabled={meta.readOnly} onChange={handle}\n                          multi={meta.multipleSelectionList} matchPos=\"any\"\n                          clearable\n                          searchable\n                          labelKey=\"label\"\n                          valueKey=\"value\"\n                          clearAllText={attr.localization.clearAllText}\n                          clearValueText={attr.localization.clearValueText}\n                          noResultsText={attr.localization.noResultsText}\n                          searchPromptText={attr.localization.searchPromptText}\n                          placeholder={attr.localization.placeholder}\n                          loadingPlaceholder={attr.localization.loadingPlaceholder}\n          />\n//        }else{\n//          return <Select ref={id} name={id} value={value} options={options}\n//                          disabled={meta.readOnly} onChange={handle} placeholder={meta.placeholder}\n//                          multi={meta.multipleSelectionList} matchPos=\"start\"\n//                          clearAllText={attr.localization.clearAllText}\n//                          clearValueText={attr.localization.clearValueText}\n//                          noResultsText={attr.localization.noResultsText}\n//                          searchPromptText={attr.localization.searchPromptText}\n//                          placeholder={attr.localization.placeholder}\n//                          loadingPlaceholder={attr.localization.loadingPlaceholder}\n//          />\n//        }\n      },\n      Date: () => {\n          return <Datetime dateFormat=\"DD.MM.YYYY\" value={moment(value === undefined ? \"\" : value)}\n                           onChange={(v) => onDateChange(v)} id={id} key={id}\n                           timeFormat={false} closeOnSelect={true} closeOnTab={true} locale={props.localization.locale || \"en\"}\n                           inputProps={ {disabled: meta.readOnly} } />\n      },\n//      dateTime: {\n//        normal: () => {\n//          return ( React.createElement(Datetime, {id: id, key: id, value: value, parent: _this, onChange: handleChange, time: true, className: attr.controlClassName}) );\n//        },\n//        readOnly: () => this.createStatic(value)\n//      },\n      textArea: () => {\n          return <textarea placeholder={meta.placeholder} id={id}  rows={meta.rows || 3} cols={meta.columns} value={value === undefined ? \"\" : value}\n                    onChange={handle} className={attr.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      textInput: () => {\n          return <input type=\"text\" placeholder={meta.placeholder} id={id} key={id} value={value === undefined ? \"\" : value}\n                    onChange={handle} className={attr.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      passwordField: () => {\n          return <input type=\"password\" placeholder={meta.placeholder} id={id} key={id} value={value === undefined ? \"\" : value}\n                       onChange={handle} className={attr.controlClassName || \"form-control\"} disabled={meta.readOnly} />\n      },\n      labelField: () => {\n          if(meta.rawValue){\n            return (<div dangerouslySetInnerHTML={{__html: value}} ></div>)\n          }else{\n            return (<div>{value}</div>)\n          }\n      },\n    };\n\n    //let valueControl;\n    if(meta.tagList)\n    {\n      return controls['select']();\n    }\n    else if(meta.passwordField)\n    {\n      return controls['passwordField']();\n    }\n    else if(meta.labelField)\n    {\n      return controls['labelField']();\n    }\n    else\n    {\n      return (controls[meta.type] || controls['textInput'])();\n    }\n    //return ({valueControl})\n//    return (\n//      <ValueControl {...Properties.get(attr.bean, path, attr.localization)}\n//                    onChange={attr.onChange} />\n//    );\n\n  }\n\n  optionsToArray(options){\n    let optionObject = [];\n    for(let i =0 ;i < options.length; i++){\n      optionObject.push({ value: options[i][0], label: options[i][1] });\n    }\n    return optionObject;\n  }\n\n//  createStatic(value) {\n//    return <p className=\"form-control-static\" dangerouslySetInnerHTML={{__html: value}} />;\n//  }\n\n  //ISO 8601 format\n  formatDate(date) {\n    const day = date.getDate();\n    const month = date.getMonth() + 1;\n    const year = date.getFullYear();\n    return year + '-' + this.format2digit(month) + '-' + this.format2digit(day);\n  }\n\n  format2digit(number){\n    return (\"0\" + number).slice(-2);\n  }\n}\n\nPropertyInput.defaultProps = {\n  localization: {\n    locale: 'en',\n    clearAllText: 'Clear all',\n    clearValueText: 'Clear value',\n    noResultsText: 'No results found',\n    searchPromptText: 'Type to search',\n    placeholder: 'Select ...',\n    loadingPlaceholder: 'Loading...'\n  },\n};\n\nPropertyInput.propTypes = {\n  bean: PropTypes.object.isRequired,\n  path: PropTypes.string,\n  id: PropTypes.number,\n  onChange: PropTypes.func,\n  localization: PropTypes.object,\n};\n\nexport default PropertyInput;\n","import React            from 'react';\nimport be5              from '../../be5';\nimport formsCollection  from '../../services/formsCollection';\nimport classNames       from 'classnames';\nimport Form             from './Form';\nimport PropertyInput    from '../../components/properties/PropertyInput';\n\n\nclass SubmitOnChangeForm extends Form\n{\n  constructor(props) {\n    super(props);\n    this.state = Object.assign({}, this.props.value, { allFieldsFilled: false });\n\n    this._onFieldChangeAndSubmit = this._onFieldChangeAndSubmit.bind(this);\n  }\n\n  _onFieldChangeAndSubmit(name, value) {\n    super._onFieldChange(name, value);\n    super.apply();\n  }\n\n  render() {\n    const attributes = this.state.data.attributes;\n    return (\n        <div className={classNames('submit-onchange-form', attributes.cssClass)}>\n          <PropertyInput id={0} bean={attributes.bean} localization={be5.messages.property} onChange={this._onFieldChangeAndSubmit} />\n          <div className=\"col-12\">\n            {this._getErrorPane()}\n          </div>\n        </div>\n    );\n  }\n\n}\n\nformsCollection.registerForm('submitOnChange', SubmitOnChangeForm);\n\nexport default SubmitOnChangeForm;","import React            from 'react';\nimport be5              from '../../be5';\nimport bus              from '../../core/bus';\nimport Form             from './Form';\nimport formsCollection  from '../../services/formsCollection';\nimport PropertySet      from '../properties/PropertySet';\nimport { ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\n\nclass ModalForm extends Form\n{\n  componentDidMount(){\n    this.initForm();\n  }\n\n  render() {\n    const attributes = this.state.data.attributes;\n    return (\n      <div>\n        <ModalHeader tag='h5' toggle={() => bus.fire(\"mainModalClose\")} >{attributes.title}</ModalHeader>\n        <form onSubmit={this._applyOnSubmit}>\n          <ModalBody>\n            <PropertySet bean={attributes.bean} onChange={this._onFieldChange} localization={be5.messages.property}/>\n          </ModalBody>\n          <div className=\"col-12\">\n            {this._getErrorPane()}\n          </div>\n          <ModalFooter>\n            {this._createOkAction()}\n          </ModalFooter>\n        </form>\n      </div>\n    );\n  }\n\n}\n\nformsCollection.registerForm('modal', ModalForm);\n\nexport default ModalForm;","import be5 from './be5';\nimport bus from './core/bus';\nimport documentState      from './core/documentState';\n\nimport './actions/loading';\nimport './actions/form';\nimport './actions/login';\nimport './actions/logout';\nimport './actions/static';\nimport './actions/table';\nimport './actions/qBuilder';\nimport './actions/text';\nimport './actions/login';\n\n\nimport './components/tables/TableForm';\nimport './components/tables/TableFormRow';\nimport './components/tables/FormTable';\nimport './components/tables/Table';\n\nimport './components/forms/SubmitOnChangeForm';\nimport './components/forms/ModalForm';\nimport './components/forms/Form';\n\n\nexport default {\n  init(){\n    const hashChange = function()\n    {\n      bus.fire(\"mainModalClose\");\n\n      const state = documentState.get(be5.mainDocumentName);\n\n      if(state.value.links !== undefined && \"#!\" + state.value.links.self === document.location.hash\n        && state.value.links.self.startsWith('form'))\n      {\n        //console.log('skip - form already opened');\n      }\n      else\n      {\n        be5.url.process(be5.mainDocumentName, document.location.hash);\n      }\n    };\n\n    window.addEventListener(\"hashchange\", hashChange, false);\n\n    be5.net.request(\"appInfo\", {}, function(data) {\n      be5.appInfo = data;\n      be5.ui.setTitle();\n    });\n\n    bus.listen('CallDefaultAction', () => {\n      be5.net.request('menu/defaultAction', {}, data => {\n        be5.url.set(data.arg)\n      });\n    });\n\n    be5.net.request('languageSelector', {}, function(data) {\n      be5.locale.set(data.selected, data.messages);\n      be5.url.process(be5.mainDocumentName, document.location.hash);\n    });\n  }\n}","// const createIllegalArgumentError = () => ({\r\n//   name: 'IllegalArgumentError',\r\n//   message: ''\r\n// });\r\n//\r\n// const getColumnName = function(column) {\r\n//   return typeof column === 'string' ? column : column.name;\r\n// };\r\n//\r\n// const toRows = function(table) {\r\n//   if (table.type && table.type === 'table') {\r\n//     table = table.value;\r\n//   }\r\n//\r\n//   return table.rows.map(row => {\r\n//     const resultRow = { id: row.id };\r\n//     for (var i = 0; i < row.cells.length; i++) {\r\n//       resultRow[getColumnName(table.columns[i])] = row.cells[i];\r\n//     }\r\n//     return resultRow;\r\n//   });\r\n// };\r\n//\r\n// const getSortableColumns = function(table) {\r\n//   if (table.type && table.type === 'table') {\r\n//     table = table.value;\r\n//   }\r\n//\r\n//   return table.columns.filter(column => !(column.options && column.options.nosort));\r\n// };\r\n//\r\n// const toRow = function(table) {\r\n//   const rows = toRows(table);\r\n//   if (rows.length !== 1) {\r\n//     throw createIllegalArgumentError();\r\n//   }\r\n//   return rows[0];\r\n// };\r\n//\r\n// const createDocument = function(resource) {\r\n//   return _.extend({\r\n//     toRow: function() {\r\n//       return toRow(this);\r\n//     },\r\n//     toRows: function() {\r\n//       return toRows(this);\r\n//     },\r\n//   }, resource);\r\n// };\r\n\r\nexport default {\r\n  // toRows: toRows,\r\n  // toRow: toRow,\r\n  // createDocument: createDocument,\r\n  // getSortableColumns: getSortableColumns\r\n};\r\n","import be5 from '../be5';\r\n\r\nexport default {\r\n  get: be5.net.requestJson,\r\n  getHtml: be5.net.requestHtml,\r\n  post: be5.net.requestJson\r\n};\r\n","import PropTypes            from 'prop-types';\nimport React from 'react';\nimport be5 from '../be5';\n\n\nclass Language extends React.Component {\n  constructor(props) {\n    super(props);\n  };\n\n  onClick(e) {\n    this.props.onLanguageClick(this.props.code);\n  };\n  \n  render() {\n    if (this.props.selected) {\n      return (\n        <div className={\"language selectedLanguage\"}>{this.props.code}</div>\n      );\n    }\n    return (\n      <div className={\"language\"} onClick={this.onClick}>{this.props.code}</div>\n    );\n  }\n}\n\nLanguage.propTypes = {\n  onLanguageClick: PropTypes.func.isRequired\n};\n\nclass LanguageList extends React.Component {\n  constructor(props) {\n    super(props);\n  };\n\n  render() {\n    const selected = this.props.data.selected;\n    const onLanguageClick = this.props.onLanguageClick;\n    const languageNodes = this.props.data.languages.map((language) =>\n        <Language key={language} code={language} selected={language === selected} onLanguageClick={onLanguageClick}/>\n    );\n    return (\n      <div className={\"languageList\"}>{languageNodes}</div>\n    );\n  }\n}\n\n class LanguageBox extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {data: { languages: [], selected: '' }}\n  };\n\n  componentDidMount() {\n    this.refresh();\n  };\n  \n  refresh() {\n    be5.net.request('languageSelector', {}, function(data) {\n        be5.locale.set(data.selected, data.messages);\n        this.setState({ data: {selected: data.selected, languages: data.languages} });\n      }.bind(this));\n  };\n  \n  changeLanguage(language) {\n    be5.net.request('languageSelector/select', { language: language }, function(data) {\n        this.setState({ data: {selected: data.selected, languages: data.languages} });\n        be5.locale.set(language, data.messages);\n      }.bind(this));\n  };\n  \n  render() {\n    return (\n      <div className={\"languageBox\"}>\n        <LanguageList data={this.state.data} onLanguageClick={this.changeLanguage}/>\n      </div>\n    );\n  }\n}\n\nexport default LanguageBox;","import be5 from '../be5';\nimport bus from '../core/bus';\nimport React from 'react';\nimport PropTypes            from 'prop-types';\nimport { UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem, Button} from 'reactstrap';\n\n\nclass Role extends React.Component\n{\n  render() {\n    const id = this.props.name + \"-checkbox\";\n    return (\n      <div className={\"role\"}>\n        <input type=\"checkbox\" id={id} checked={this.props.state} onChange={() => this.props.onChange()} />\n        <label htmlFor={id}><span className={\"checkBox\"}/>{this.props.name}</label>\n      </div>\n    )\n  }\n}\n\nRole.propTypes = {\n  onChange: PropTypes.func.isRequired\n};\n\nclass RoleBox extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      availableRoles: [\"Unknown\"], selectedRoles: [\"Unknown\"]\n    };\n\n    this._onRoleChange = this._onRoleChange.bind(this);\n    this._changeRoles = this._changeRoles.bind(this);\n    this.handleSelectAll = this.handleSelectAll.bind(this);\n    this.handleClear = this.handleClear.bind(this);\n  }\n\n\n  handleSelectAll() {\n    this._changeRoles(this.state.availableRoles.join(\",\"))\n  }\n\n  handleClear() {\n    this._changeRoles(\"\")\n  }\n\n  render() {\n    if (this.state.availableRoles.length < 1) {\n      return ( <div className={'roleBox'}/> );\n    }\n    const selectedRoles = this.state.selectedRoles;\n    const roleNodes = this.state.availableRoles.map((role) =>\n      <Role key={role} ref={role} name={role} state={selectedRoles.indexOf(role) !== -1} onChange={() => this._onRoleChange(role)}/>\n    );\n\n    return (\n      <div className={'roleBox'}>\n        <UncontrolledDropdown size=\"sm\">\n          <DropdownToggle caret>{be5.messages.roles}</DropdownToggle>\n\n          <DropdownMenu>\n            {roleNodes}\n            <DropdownItem divider />\n\n            <div className=\"roleBox_add-actions\">\n              Выбрать:{' '}\n              <Button onClick={this.handleSelectAll} color=\"primary\" className=\"enable-all\" size=\"sm\">Всё</Button>{' '}\n              <Button onClick={this.handleClear} color=\"secondary\" className=\"disable-all\" size=\"sm\">Ничего</Button>\n            </div>\n          </DropdownMenu>\n        </UncontrolledDropdown>\n        <div className=\"roleBox_username\">\n          {this.state.username}\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    this.refresh();\n  }\n\n  refresh() {\n    be5.net.request('roleSelector', {}, data => this.setState(data));\n  }\n\n  _onRoleChange(name) {\n    let roles = this.state.selectedRoles;\n    let containRoleIndex = roles.indexOf(name);\n\n    if ( containRoleIndex !== -1) {\n      roles.splice(roles.indexOf(name), 1);\n    } else  {\n       roles.push(name);\n    }\n\n     this._changeRoles(roles.join(\",\"));\n  }\n\n  _changeRoles(roles) {\n    be5.net.request('roleSelector/select', { roles: roles }, data => {\n      this.setState(data);\n      bus.fire('RoleChanged', {});\n    });\n\n  }\n}\n\nexport default RoleBox;","import React from 'react';\n\nimport logoBe from '../../../../images/logo-be.png';\n\nexport default React.createClass({\n  displayName: 'MenuFooter',\n\n  render() {\n    return (\n      <div className=\"menuFooter\">\n        <img src={logoBe}/>\n      </div>\n    );\n  }\n});\n","const createUnknownActionException = actionName => ({\n  name: 'UnknownActionException',\n  message: 'Action \\'' + actionName + '\\' is unknown'\n});\n\nexport default {\n  /**\n   * Returns an object with href and target.\n   */\n  parse: function(action) {\n    switch (action.name) {\n    case 'open':\n      return {\n        href: action.arg,\n        target: '_blank'\n      };\n    case 'call':\n      return {\n        href: '#!' + action.arg,\n        target: ''\n      };\n    }\n    \n    throw createUnknownActionException(action.name);\n  }\n};\n","import React  from 'react';\nimport be5    from '../../be5';\nimport actions from '../../services/actions';\n\nconst MenuNode = React.createClass({\n  displayName: 'MenuNode',\n  \n  getInitialState() {\n    return { href: '#', target: '', classes: '' };\n  },\n  \n  componentDidMount() {\n    var href = '#';\n    var target = '';\n    var classes = '';\n    if (this.props.level == 1) {\n      classes += 'rootMenuItem';\n    } else {\n      classes += 'menuItem';\n    }\n    var hasAction = this.props.data.action != null;\n    if (hasAction) {\n      classes += ' menuItemWithRef';\n      const action = actions.parse(this.props.data.action);\n      href = action.href;\n      target = action.target;\n    } else {\n      classes += ' menuItemWithoutRef';\n    }\n    this.setState({href: href, target: target, classes: classes, hasAction:hasAction});\n  },\n  \n  render() {\n    const hasChildren = this.props.data.children != null;\n    \n    if (!hasChildren) {\n      const key = 'menu node ' + this.props.data.title;\n      return (\n        <div className='menuNode' key={key}>\n          {this._getHead()}\n          {this._getOperations()}\n        </div>\n      );\n    }\n    \n    const nextLevel = this.props.level + 1;\n    const children = this.props.data.children.map(child => {\n      const childKey = 'li ' + child.title;\n      return (\n        <li key={childKey}>\n          <MenuNode key={child.title} data={child} level={nextLevel}/>\n        </li>\n      );\n    });\n    \n    return (\n      React.DOM.div({className: 'menuNode', key: 'menu node ' + this.props.data.title}, \n        this._getHead(), this._getOperations(), \n        React.DOM.ul({key: 'ul ' + this.props.data.title}, children)\n      )\n    );\n  },\n  \n  _onClick(event) {\n    if(/^#/.test(this.state.href)) {\n      be5.url.set(this.state.href);\n    }\n  },\n  \n  _getHead() {\n    if(this.state.hasAction) {\n        return (\n            React.DOM.a({ href: this.state.href, className: this.state.classes, target: this.state.target,\n                onClick: this._onClick, key: 'a ' + this.props.data.title }, this.props.data.title)\n        );\n    }else{\n        return (\n            <span className={this.state.classes}>{this.props.data.title}</span>\n        );\n    }\n  },\n  \n  _getOperations() {\n    const hasOperations = this.props.data.operations != null;\n    \n    if (!hasOperations) {\n      const key = 'operations ' + this.props.data.title\n      return <div key={key}/>;\n    }\n    \n    return this.props.data.operations.map(operation => {\n      const href = '#!'+operation.action.arg;\n      const title = operation.title == 'Insert' ? '+' : operation.title;\n      const opBoxKey = 'operation box ' + title;\n      const opKey = 'operation a ' + title;\n      return (\n        <div className=\"menuOperationBox\" key={opBoxKey}> \n          <a href={href} className=\"menuOperation\" key={opKey}>\n            [{title}]\n          </a>\n        </div>\n      );\n    });\n  }\n});\n\nexport default MenuNode;\n","import React from 'react';\nimport be5        from '../../be5';\nimport MenuNode   from './MenuNode';\n\n\nclass MenuBody extends React.Component\n{\n  constructor(props) {\n    super(props);\n    this.state = {root: [ { title: 'Loading...' } ], query: ''};\n\n    this._getFilteredRoot = this._getFilteredRoot.bind(this);\n  }\n\n  componentDidMount() {\n    this.refresh();\n  }\n\n  refresh() {\n    be5.net.request('menu', {}, data => {\n      this.setState(data);\n    });\n  }\n\n  render() {\n    const filteredRoot = this._getFilteredRoot();\n    const rootNodes = filteredRoot.map(node => (\n      <MenuNode key={JSON.stringify(node)} data={node} level={1}/>\n    ));\n    return (\n      <div className=\"menu\">{rootNodes}</div>\n    );\n  }\n\n  _getFilteredRoot() {\n    const containsIgnoreCase = (str, substr) => {\n      return str.toLowerCase().indexOf(substr.toLowerCase()) !== -1;\n    };\n    const anyChildContainsIgnoreCase = (node, query) => {\n      if (containsIgnoreCase(node.title, query)) {\n        return true;\n      }\n      return node.children && _.any(node.children, child => anyChildContainsIgnoreCase(child, query));\n    };\n    const filterNodeContent = (node, query) => {\n      if (!node.children) {\n        return node;\n      }\n      return _.extend({}, node, { children: filterByTitle(node.children, query) });\n    };\n    const filterByTitle = (root, query) => {\n      return root\n        .filter(node => anyChildContainsIgnoreCase(node, query))\n        .map(node => filterNodeContent(node, query));\n    };\n\n    return filterByTitle(this.state.root, this.state.query);\n  }\n}\n\nexport default MenuBody;","import React from 'react';\nimport PropTypes            from 'prop-types';\nimport be5        from '../../be5';\n\n\nclass MenuSearchField extends React.Component\n{\n  constructor(props) {\n    super(props);\n    this.state = { value: ''};\n\n    this._handleChange = this._handleChange.bind(this);\n  }\n\n  render() {\n    return (\n      <input type=\"text\" className=\"searchField form-control\" onChange={this._handleChange} value={this.state.value} placeholder={be5.messages.filter}/>\n    );\n  }\n\n  _handleChange(event) {\n    this.setState({ value: event.target.value });\n    this.props.onChange(event.target.value);\n  }\n}\n\nMenuSearchField.propTypes = {\n  onChange: PropTypes.func.isRequired\n};\n\nexport default MenuSearchField;","import React from 'react';\n\nimport MenuFooter  from './MenuFooter';\nimport MenuBody    from './MenuBody';\nimport MenuSearchField from './MenuSearchField';\n\n\nclass Menu extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {};\n\n    this._handleQueryChange = this._handleQueryChange.bind(this);\n  }\n\n  render() {\n    return (\n      <div className=\"menuContainer\">\n        <MenuSearchField ref=\"searchfield\" onChange={this._handleQueryChange}/>\n        <MenuBody ref=\"menubody\"/>\n        <MenuFooter/>\n      </div>\n    );\n  };\n\n  refresh() {\n    //this.refs.menuheader.setState({ message: be5.messages.welcome });\n    this.refs.menubody.refresh();\n  };\n\n  _handleQueryChange(query) {\n    this.refs.menubody.setState({ query: query });\n  }\n}\n\nexport default Menu;","import React from 'react';\nimport LanguageSelector from './LanguageSelector';\nimport RoleSelector     from './RoleSelector';\nimport Menu             from './menu/Menu';\n\nclass SideBar extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className={\"side\"}>\n        <RoleSelector ref=\"roleSelector\"/>\n        <Menu ref=\"menu\"/>\n        <hr/>\n        <LanguageSelector ref=\"languageSelector\"/>\n      </div>\n    );\n  };\n\n  refresh() {\n    this.setState({});\n    if(this.refs.menu)\n      this.refs.menu.refresh();\n    if(this.refs.languageSelector)\n      this.refs.languageSelector.refresh();\n    if(this.refs.roleSelector)\n      this.refs.roleSelector.refresh();\n  };\n}\n\nexport default SideBar;","// Based on https://github.com/tomkp/react-split-pane\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n\nvar Pane = React.createClass({\n  displayName: \"SplitPane-Pane\",\n  \n  getInitialState() {\n    return {};\n  },\n\n  render() {\n    var split = this.props.split;\n    var classes = ['Pane', split, this.props.classes];\n\n    var style = {\n      flex: 1,\n      position: 'relative',\n      outline: 'none',\n      overflow: 'auto'\n    };\n\n    if(this.state.hide){\n      style['display'] = 'none';\n    }\n\n    if (this.state.size) {\n      if (split === 'horizontal') {\n        style.height = this.state.size;\n        style.display = 'flex';\n      } else {\n        style.width = this.state.size;\n      }\n      style.flex = 'none';\n    }\n    return React.DOM.div({className: classes.join(' '), style: style}, this.props.children);\n  }\n});\n\nvar Resizer = React.createClass({displayName: \"SplitPane-Resizer\",\n  handleDown(event) {\n    this.props.down(event);\n  },\n  \n  render() {\n    var split = this.props.split;\n    var classes = ['Resizer', split];\n    return React.DOM.span({className: classes.join(' '), onMouseDown: this.handleDown});\n  }\n});\n\nvar SplitPane = React.createClass({displayName: \"SplitPane\",\n  propTypes: {\n    minSize: React.PropTypes.number,\n    split: React.PropTypes.string\n  },\n  \n  getInitialState() {\n    return {\n      active: false\n    };\n  },\n  \n  getDefaultProps() {\n    return {\n      minSize: 0\n    };\n  },\n  \n  componentDidMount() {\n    document.addEventListener('mouseup', this.up);\n    document.addEventListener('mousemove', this.move);\n    var ref = this.refs.pane1;\n    if (ref){\n      if (this.props.defaultSize) {\n        ref.setState({size: this.props.defaultSize});\n        if(this.props.defaultSize < 32){\n          ref.setState({hide: true});\n        }\n      }\n    }\n  },\n  \n  componentWillUnmount() {\n    document.removeEventListener('mouseup', this.up);\n    document.removeEventListener('mousemove', this.move);\n  },\n  \n  down(event) {\n    var position = this.props.split === 'vertical' ? event.clientX : event.clientY;\n    this.setState({\n      active: true,\n      position: position\n    });\n    event.preventDefault();\n  },\n  \n  move(event) {\n    if (this.state.active) {\n      var ref = this.refs.pane1;\n      if (ref) {\n        var node = ReactDOM.findDOMNode(ref);\n        if (window.getComputedStyle) {\n          var styles = window.getComputedStyle(node);\n          var rect = node.getBoundingClientRect();\n          var width = rect.right-rect.left;\n          var height = rect.bottom-rect.top;\n          var current = this.props.split === 'vertical' ? event.clientX : event.clientY;\n          var size = this.props.split === 'vertical' ? width : height;\n          var position = this.state.position;\n          var newSize = size - (position - current);\n          this.setState({\n            position: current\n          });\n          if(newSize < 32){\n            ref.setState({hide: true});\n          }else{\n            ref.setState({hide: false});\n          }\n          if (newSize >= this.props.minSize) {\n            ref.setState({\n              size: newSize\n            });\n          }\n        }\n        event.preventDefault();\n      }\n    }\n  },\n  \n  up() {\n    this.setState({\n      active: false\n    });\n  },\n  \n  merge(into, obj) {\n    for (var attr in obj) {\n      into[attr] = obj[attr];\n    }\n  },\n  \n  render() {\n    var split = this.props.split || 'vertical';\n\n    var style = {\n      display: 'flex',\n      flex: 1,\n      position: 'relative',\n      outline: 'none',\n      overflow: 'hidden'\n    };\n\n    if (split === 'horizontal') {\n      this.merge(style, {\n        flexDirection: 'column',\n        height: '100%',\n        minHeight: '100%',\n        position: 'absolute',\n        top: 0,\n        bottom: 0,\n        width: '100%'\n      });\n    } else {\n      this.merge(style, {\n        flexDirection: 'row',\n        height: '100%',\n        position: 'absolute',\n        left: 0,\n        right: 0\n      });\n    }\n\n    var elements = [];\n    var children = this.props.children;\n    var child0 = children[0];\n    var child1 = children[1];\n    elements.push(React.createElement(Pane, {ref: \"pane1\", key: \"pane1\", split: split, classes: \"pane1\" }, child0));\n    elements.push(React.createElement(Resizer, {ref: \"resizer\", key: \"resizer\", down: this.down, split: split}));\n    elements.push(React.createElement(Pane, {ref: \"pane2\", key: \"pane2\", split: split, classes: \"pane2\"}, child1));\n\n    var classes = ['SplitPane', split];\n\n    return React.DOM.div({className: classes.join(' '), style: style, ref: \"splitPane\"}, elements);\n  }\n});\n\nexport default SplitPane;\n","import React from 'react';\nimport bus from '../core/bus';\nimport be5 from '../be5';\nimport Document from './Document';\nimport Alert from 'react-s-alert';\nimport { Modal } from 'reactstrap';\n\n\nclass Be5Components extends React.Component\n{\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false\n    };\n\n    //this.toggle = this.toggle.bind(this);\n    this.open = this.open.bind(this);\n    this.close = this.close.bind(this);\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  // toggle() {\n  //   this.setState({\n  //     modal: !this.state.modal\n  //   });\n  // }\n\n  open() {\n    this.setState({ modal: true });\n  }\n\n  close() {\n    this.setState({ modal: false });\n  }\n\n  componentDidMount() {\n    bus.listen(\"mainModalClose\", this.close );\n    bus.listen(\"mainModalOpen\", this.open );\n\n    bus.listen(\"alert\", data => {\n      if (data.type === 'error') {\n        Alert.error(data.msg, {\n          position: 'top-right',\n          timeout: 5000\n        });\n      } else {\n        Alert.success(data.msg, {\n          position: 'top-right',\n          timeout: 5000\n        });\n      }\n    });\n  }\n\n  onChange(){\n    //todo\n    console.log(this.props, this.state);\n  }\n\n  render() {\n    return (\n      <div>\n        <Alert stack={{limit: 10}}/>\n        <Modal isOpen={this.state.modal} toggle={this.close} className={this.props.className}>\n          <Document ref=\"document\" frontendParams={{documentName: be5.mainModalDocumentName}}/>\n        </Modal>\n      </div>\n    );\n\n  }\n\n  refresh(){\n\n  }\n\n}\n\nexport default Be5Components;","import React from 'react';\nimport bus from '../core/bus';\nimport be5 from '../be5';\nimport SideBar from './SideBar';\nimport Document from './Document';\nimport SplitPane from './SplitPane';\nimport Be5Components from \"./Be5Components\";\n\n\nclass Application extends React.Component\n{\n  constructor(props) {\n    super(props);\n\n    this.refresh = this.refresh.bind(this);\n  }\n\n  componentDidMount() {\n    //TODO refactoring to \"RefreshAll\"\n    bus.listen('LoggedOut', this.refresh);\n    bus.listen('LoggedIn', this.refresh);\n    bus.listen('LanguageChanged', this.refresh);\n    bus.listen('RoleChanged', this.refresh);\n  }\n\n  render() {\n    return (\n      <div>\n        <Be5Components ref=\"be5Components\"/>\n        <SplitPane split=\"vertical\" defaultSize={280} >\n          <SideBar ref=\"sideBar\"/>\n          <Document ref=\"document\" frontendParams={{documentName: be5.mainDocumentName}} />\n        </SplitPane>\n      </div>\n    );\n\n  }\n\n  refresh() {\n    this.refs.sideBar.refresh();\n    this.refs.be5Components.refresh();\n  }\n}\n\nexport default Application;","import be5 from '../../be5';\nimport bus from '../../core/bus';\n\nconst listeners = [];\n\nvar actions = []; // all actions from backend\n\nvar tree = {};\n\nconst menu = {\n  find: function(coords) {\n    return _(actions).findWhere(coords);\n  },\n  getRaw: function() {\n    return tree;\n  }\n};\n\nconst getMenu = function() {\n  return menu;\n};\n\nconst addListener = function(listener) {\n  listeners.push(listener);\n};\n\nconst changed = function() {\n  _(listeners).each(function(listener) {\n    listener(menu);\n  });\n};\n\nconst copyId = function(item) {\n  return { entity: item.entity, query: item.query, operation: item.operation };\n};\n\nconst updateActions = function() {\n  const resultActions = [];\n  \n  _(tree.root).each(item => {\n    if (item.hasOwnProperty('action')) {\n      resultActions.push(_.extend({}, item.id, { action: item.action, title: item.title }));\n    }\n    _(item.children || []).each(qitem => {\n      resultActions.push(_.extend({}, qitem.id, { action: qitem.action, title: qitem.title }));\n    });\n  });\n  \n  actions = resultActions;\n};\n\nconst load = function() {\n  be5.net.request('menu/withIds', {}, data => {\n    tree = data;\n    updateActions(data);\n    changed();\n  });\n};\n\n//load();\n\nexport default {\n  // function(listener)\n  addListener: addListener,\n  // function()\n  changed: changed,\n  // function()\n  getMenu: getMenu,\n  // function()\n  reload: load\n};\n","import React from 'react';\nimport Be5MenuHolder from './Be5MenuHolder';\nimport actions        from '../../services/actions';\n\nexport default React.createClass({\n  displayName: 'Be5Menu',\n  \n  propTypes: {\n    // true => default menu\n    // false => user lists all possible items using Be5MenuItem\n    show: React.PropTypes.bool.isRequired,\n    branding: React.PropTypes.string\n  },\n  \n  getInitialState() {\n    return { loaded: false };\n  },\n  \n  componentDidMount() {\n    if (this.props.show) {\n      this._onMenuChanged(Be5MenuHolder.getMenu());\n      Be5MenuHolder.addListener(this._onMenuChanged);\n    }\n  },\n  \n  _onMenuChanged(menu) {\n    this.setState({\n      loaded: Object.keys(menu.getRaw()).length !== 0,\n      menu: menu.getRaw()\n    });\n  },\n  \n  render() {\n    if (!this.props.show) {\n      return ( <span></span> );\n    }\n    \n    const rootMenuItems = this.state.loaded ? this._renderMenuItems(this.state.menu.root, false) : <li>Loading...</li>;\n    const branding = this.props.branding ? <a className=\"navbar-brand\" href=\"#\">{this.props.branding}</a> : undefined;\n    const rightButtons = this._renderRightButtons();\n    \n    return (\n      <nav className=\"navbar navbar-light bg-faded\">\n        <div className=\"container\">\n          {branding}\n          <ul className=\"nav navbar-nav\">\n            {rootMenuItems}\n          </ul>\n          {rightButtons}\n        </div>\n      </nav>\n    );\n  },\n  \n  _renderRightButtons() {\n    if (!this.state.loaded) {\n      return undefined;\n    }\n    if (!this.state.menu.loggedIn){\n      return (\n        <form className=\"form-inline pull-right\">\n          <a className=\"btn btn-secondary\" role=\"button\" href=\"#!login\">Sign in</a>\n          {' '}\n          <a className=\"btn btn-primary\" role=\"button\" href=\"#!register\">Sign up</a>\n        </form>\n      );\n    }\n    return (\n      <form className=\"form-inline pull-right\">\n        <a className=\"btn btn-secondary\" role=\"button\" href=\"#!logout\">Log out</a>\n      </form>\n    );\n  },\n  \n  _renderMenuItems(items, inDropdown) {\n    return _(items).map(item => {\n      if (item.default) {\n        return undefined;\n      }\n      \n      if (!item.children || item.children.length === 0) {\n        const { href, target } = actions.parse(item.action);\n        const liClass = inDropdown ? '' : 'nav-item';\n        const aClass = inDropdown ? 'dropdown-item' : 'nav-link';\n        return <li className={liClass} key={target+href}><a className={aClass} href={href} target={target}>{item.title}</a></li>;\n      }\n      \n      const dropdownMenuItems = this._renderMenuItems(item.children, true);\n      \n      return (\n        <li className=\"nav-item dropdown\" key={item.title}>\n          <a className=\"nav-link dropdown-toggle\" href=\"#\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" role=\"button\">\n            {item.title}\n          </a>\n          <ul className=\"dropdown-menu\">\n            {dropdownMenuItems}\n          </ul>\n        </li>\n      );\n    });\n  },\n  \n  /* public */\n  refresh() {\n    Be5MenuHolder.reload();\n  }\n});\n","import React from 'react';\nimport Be5MenuHolder from './Be5MenuHolder';\nimport Const from '../../constants';\nimport actions from '../../services/actions';\n\nexport default React.createClass({\n  displayName: 'Be5MenuItem',\n  \n  propTypes: {\n    entity: React.PropTypes.string,\n    view: React.PropTypes.string,\n    op: React.PropTypes.string\n  },\n  \n  getInitialState() {\n    return { available: false, title: '' };\n  },\n  \n  componentDidMount() {\n    this._onMenuChanged(Be5MenuHolder.getMenu());\n    Be5MenuHolder.addListener(this._onMenuChanged);\n  },\n  \n  render() {\n    if (!this.state.available) {\n      return ( <span></span> );\n    }\n    const { href, target } = actions.parse(Be5MenuHolder.getMenu().find(this._getCoordinates()).action);\n    return (\n      <a className=\"menu-item\" href={href} target={target}>{this.state.title}</a>\n    );\n  },\n  \n  _onMenuChanged(menu) {\n    var item = Be5MenuHolder.getMenu().find(this._getCoordinates());\n    if (!item) {\n      this.setState({ available: false });\n    } else {\n      this.setState({ available: true, title: item.title });\n    }\n  },\n  \n  // Translates \"op\" to \"operation\" and \"view\" to \"query\"\n  // Don't read it, it's boring.\n  _getCoordinates() {\n    if (this.props.view && this.props.op) {\n      return {\n        entity: this.props.entity, query: this.props.view, operation: this.props.op\n      };\n    }\n    if (this.props.op) {\n      return {\n        entity: this.props.entity, operation: this.props.op\n      };\n    }\n    return {\n      entity: this.props.entity,\n      query: this.props.view || Const.DEFAULT_VIEW\n    };\n  }\n});\n","import React from 'react';\nimport cx from 'classnames';\n\nexport default React.createClass({\n  displayName: 'Sorter',\n  \n  propTypes: {\n    /**\n     * An array of columns with name and title.\n     */\n    columns: React.PropTypes.array.isRequired,\n    \n    /**\n     * A callback to call when the user clicks a sorting button.\n     */\n    onSelect: React.PropTypes.func.isRequired,\n    \n    /**\n     * A name of the soring column, or undefined.\n     */\n    sortingColumnName: React.PropTypes.string,\n    \n    /**\n     * A way to sort, or undefined.\n     */\n    sortingOrder: React.PropTypes.oneOf(['asc', 'desc'])\n  },\n  \n  render() {\n    if (this.props.columns.length === 0) {\n      return <div/>;\n    }\n    \n    return (\n      <form className=\"form-inline\">\n        <div className=\"form-group\">\n          <label>Sort by</label>{' '}\n          <div className=\"btn-group btn-group-sm\" role=\"group\" aria-label=\"Sorting\">\n            {this.props.columns.map(this._renderColumn)}\n          </div>\n        </div>\n      </form>\n    );\n  },\n  \n  _renderColumn(column) {\n    const selected = this.props.sortingColumnName === column.name;\n    const klass = cx({\n      'btn': true,\n      'btn-primary': selected,\n      'btn-secondary': !selected\n    });\n    const asc = this.props.sortingOrder === 'asc';\n    const iconClass = cx({\n      'fa': true,\n      'fa-sort': !selected,\n      'fa-sort-asc': selected && asc,\n      'fa-sort-desc': selected && !asc\n    });\n    return (\n      <button type=\"button\" className={klass} onClick={this._onSelect.bind(this, column)}>\n        {column.title}{' '}<span className={iconClass}></span>\n      </button>\n    );\n  },\n  \n  _onSelect(column) {\n    this.props.onSelect(column);\n  }\n});\n","import React from 'react';\n  \nexport default React.createClass({\n  displayName: 'TreeMenu',\n  \n  propTypes: {\n    /*\n     * Example:\n     * [{ name: 'Menu', id: 1, children: [{ name: 'Child', id: 2 }] }]\n     */\n    rootItems: React.PropTypes.array.isRequired,\n    /*\n     * A node will be passed to the function.\n     */\n    onItemSelect: React.PropTypes.func.isRequired,\n    /*\n     * An item that should be highligted.\n     */\n    activeItemId: React.PropTypes.string.isRequired\n  },\n  \n  render() {\n    return (\n      <div className=\"tree-menu\">\n        <ul className=\"tree-menu-node-children\">\n          {this.props.rootItems.map(node => this._renderNode(node))}\n        </ul>\n      </div>\n    );\n  },\n  \n  _renderNode(node) {\n    return (\n      <li className=\"tree-menu-node\" key={node.name}>\n        <div className=\"tree-menu-node-title\">\n          <a role=\"button\" className={'tree-menu-node-link' + (node.id === this.props.activeItemId ? ' active' : '')} href=\"javascript:void(0);\" onClick={this._handleClick.bind(this, node)}>{node.name}</a>\n        </div>\n        {node.children\n          ? <div className=\"tree-menu-node-children-container\">\n              <ul className=\"tree-menu-node-children\">\n                {node.children.map(node => this._renderNode(node))}\n              </ul>\n            </div>\n          : undefined\n        }\n      </li>\n    );\n  },\n  \n  _handleClick(node) {\n    this.props.onItemSelect(node);\n  }\n});\n","import React from 'react';\nimport PropTypes            from 'prop-types';\nimport classNames           from 'classnames';\nimport be5                  from '../be5';\nimport Document             from './Document';\n\n\nclass FormWizard extends React.Component\n{\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      compState: this.props.startAtStep,\n      navState: this.getNavStates(this.props.startAtStep, this.props.steps.length),\n    };\n\n    this.hidden = {\n      display: 'none'\n    };\n\n    // if user did not give a custom nextTextOnFinalActionStep, the nextButtonText becomes the default\n    this.nextTextOnFinalActionStep = (this.props.nextTextOnFinalActionStep) ? this.props.nextTextOnFinalActionStep : this.props.nextButtonText;\n\n    //this.applyValidationFlagsToSteps();\n  }\n\n  componentDidMount(){\n    this.refresh()\n  }\n\n  refresh() {\n    this.setState(this.getPrevNextBtnState(this.props.startAtStep));\n    be5.url.process(this.props.documentName, this.props.steps[this.state.compState].url);\n  }\n\n  // update the header nav states via classes so they can be styled via css\n  getNavStates(indx, length) {\n    let styles = [];\n    for (let i = 0; i<length; i++) {\n      if (i === indx) {\n        styles.push('doing');\n      }\n      else if (i < indx) {\n        styles.push('done');\n      }\n      else {\n        styles.push('todo');\n      }\n    }\n\n    return { current: indx, styles }\n  }\n\n  getPrevNextBtnState(currentStep) {\n    // first set default values\n    let showPreviousBtn = true;\n    let showNextBtn = true;\n    let nextStepText = this.props.nextButtonText;\n\n    // first step hide previous btn\n    if (currentStep === 0) {\n      showPreviousBtn = false;\n    }\n\n    // second to last step change next btn text if supplied as props\n    if (currentStep === this.props.steps.length - 2 ) {\n      nextStepText = this.props.nextTextOnFinalActionStep || nextStepText;\n    }\n\n    // last step hide next btn, hide previous btn if supplied as props\n    if (currentStep >= this.props.steps.length - 1) {\n      showNextBtn = false;\n      showPreviousBtn = this.props.prevBtnOnLastStep === false ? false : true;\n    }\n\n    return {\n      showPreviousBtn,\n      showNextBtn,\n      nextStepText\n    };\n\n  }\n\n  // which step are we in?\n  checkNavState(currentStep) {\n    this.setState(this.getPrevNextBtnState(currentStep));\n  }\n\n  // set the nav state\n  setNavState(next) {\n    this.setState({navState: this.getNavStates(next, this.props.steps.length)});\n\n    if (next < this.props.steps.length) {\n      this.setState({compState: next});\n    }\n\n    be5.url.process(this.props.documentName, this.props.steps[next].url);\n\n    this.checkNavState(next);\n  }\n\n  // handles keydown on enter being pressed in any Child component input area. in this case it goes to the next (ignore textareas as they should allow line breaks)\n  handleKeyDown(evt) {\n    if (evt.which === 13) {\n      if (!this.props.preventEnterSubmission && evt.target.type !== 'textarea') {\n        this.next();\n      }\n      else if (evt.target.type !== 'textarea') {\n        evt.preventDefault();\n      }\n    }\n  }\n\n  // this utility method lets Child components invoke a direct jump to another step\n  jumpToStep(evt) {\n    //if (evt.target == undefined) {\n      // a child step wants to invoke a jump between steps. in this case 'evt' is the numeric step number and not the JS event\n      this.setNavState(evt);\n    //}\n//    else { // the main navigation step ui is invoking a jump between steps\n//      if (!this.props.stepsNavigation || evt.target.value == this.state.compState) { // if stepsNavigation is turned off or user clicked on existing step again (on step 2 and clicked on 2 again) then ignore\n//        evt.preventDefault();\n//        evt.stopPropagation();\n//\n//        return;\n//      }\n//\n//      evt.persist(); // evt is a react event so we need to persist it as we deal with aync promises which nullifies these events (https://facebook.github.io/react/docs/events.html#event-pooling)\n//\n//      const movingBack = evt.target.value < this.state.compState; // are we trying to move back or front?\n//      let passThroughStepsNotValid = false; // if we are jumping forward, only allow that if inbetween steps are all validated. This flag informs the logic...\n//      let proceed = false; // flag on if we should move on\n//\n//      this.abstractStepMoveAllowedToPromise(movingBack)\n//        .then((valid = true) => { // validation was a success (promise or sync validation). In it was a Promise's resolve() then proceed will be undefined, so make it true. Or else 'proceed' will carry the true/false value from sync v\n//          proceed = valid;\n//\n//          if (!movingBack) {\n//            this.updateStepValidationFlag(proceed);\n//          }\n//\n//          if (proceed) {\n//            if (!movingBack) {\n//              // looks like we are moving forward, 'reduce' a new array of step>validated values we need to check and 'some' that to get a decision on if we should allow moving forward\n//              passThroughStepsNotValid = this.props.steps\n//                .reduce((a, c, i) => {\n//                  if (i >= this.state.compState && i < evt.target.value) {\n//                    a.push(c.validated);\n//                  }\n//                  return a;\n//                }, [])\n//                .some((c) => {\n//                  return c === false\n//                })\n//            }\n//          }\n//        })\n//        .catch((e) => {\n//          // Promise based validation was a fail (i.e reject())\n//          if (!movingBack) {\n//            this.updateStepValidationFlag(false);\n//          }\n//        })\n//        .then(() => {\n//          // this is like finally(), executes if error no no error\n//          if (proceed && !passThroughStepsNotValid) {\n//            if (evt.target.value === (this.props.steps.length - 1) &&\n//              this.state.compState === (this.props.steps.length - 1)) {\n//                this.setNavState(this.props.steps.length);\n//            }\n//            else {\n//              this.setNavState(evt.target.value);\n//            }\n//          }\n//        })\n//        .catch(e => {\n//          if (e) {\n//            // see note below called \"CatchRethrowing\"\n//            // ... plus the finally then() above is what throws the JS Error so we need to catch that here specifically\n//            setTimeout(function() { throw e; });\n//          }\n//        });\n//    }\n  }\n\n  // move next via next button\n  next() {\n    if (this.state.compState + 1 < this.props.steps.length) {\n      this.setNavState(this.state.compState + 1);\n    }\n//    this.abstractStepMoveAllowedToPromise()\n//      .then((proceed = true) => {\n//        // validation was a success (promise or sync validation). In it was a Promise's resolve() then proceed will be undefined, so make it true. Or else 'proceed' will carry the true/false value from sync validation\n//        this.updateStepValidationFlag(proceed);\n//\n//        if (proceed) {\n//          this.setNavState(this.state.compState + 1);\n//        }\n//      })\n//      .catch((e) => {\n//        if (e) {\n//          // CatchRethrowing: as we wrap StepMoveAllowed() to resolve as a Promise, the then() is invoked and the next React Component is loaded.\n//          // ... during the render, if there are JS errors thrown (e.g. ReferenceError) it gets swallowed by the Promise library and comes in here (catch)\n//          // ... so we need to rethrow it outside the execution stack so it behaves like a notmal JS error (i.e. halts and prints to console)\n//          //\n//          setTimeout(function() { throw e; });\n//        }\n//\n//        // Promise based validation was a fail (i.e reject())\n//        this.updateStepValidationFlag(false);\n//      });\n  }\n\n  // move behind via previous button\n  previous() {\n    if (this.state.compState > 0) {\n      this.setNavState(this.state.compState - 1);\n    }\n  }\n\n  // update step's validation flag\n//  updateStepValidationFlag(val = true) {\n//    this.props.steps[this.state.compState].validated = val; // note: if a step component returns 'underfined' then treat as \"true\".\n//  }\n\n  // are we allowed to move forward? via the next button or via jumpToStep?\n//  stepMoveAllowed(skipValidationExecution = false) {\n//    let proceed = false;\n//\n//    if (this.props.dontValidate) {\n//      proceed = true;\n//    }\n//    else {\n//      if (skipValidationExecution) {\n//        // we are moving backwards in steps, in this case dont validate as it means the user is not commiting to \"save\"\n//        proceed = true;\n//      }\n//      else if (this.isStepAtIndexHOCValidationBased(this.state.compState)) {\n//        // the user is using a higer order component (HOC) for validation (e.g react-validation-mixin), this wraps the StepZilla steps as a HOC,\n//        // so use hocValidationAppliedTo to determine if this step needs the aync validation as per react-validation-mixin interface\n//        proceed = this.refs.activeComponent.refs.component.isValidated();\n//      }\n//      else if (Object.keys(this.refs).length == 0 || typeof this.refs.activeComponent.isValidated == 'undefined') {\n//        // if its a form component, it should have implemeted a public isValidated class (also pure componenets wont even have refs - i.e. a empty object). If not then continue\n//        proceed = true;\n//      }\n//      else {\n//        // user is moving forward in steps, invoke validation as its available\n//        proceed = this.refs.activeComponent.isValidated();\n//      }\n//    }\n//\n//    return proceed;\n//  }\n\n//  isStepAtIndexHOCValidationBased(stepIndex) {\n//    return (this.props.hocValidationAppliedTo.length > 0 && this.props.hocValidationAppliedTo.indexOf(stepIndex) > -1);\n//  }\n\n  // a validation method is each step can be sync or async (Promise based), this utility abstracts the wrapper stepMoveAllowed to be Promise driven regardless of validation return type\n//  abstractStepMoveAllowedToPromise(movingBack) {\n//    return Promise.resolve(this.stepMoveAllowed(movingBack));\n//  }\n\n  // get the classname of steps\n  getClassName(className, i){\n    let liClassName = className + \"-\" + this.state.navState.styles[i];\n\n    // if step ui based navigation is disabled, then dont highlight step\n    if (!this.props.stepsNavigation)\n        liClassName += \" no-hl\";\n\n    return liClassName;\n  }\n\n  // render the steps as stepsNavigation\n  renderSteps() {\n    return this.props.steps.map((s, i)=> (\n      <li className={this.getClassName(\"progtrckr\", i)} onClick={() => this.jumpToStep(i)} key={i} value={i}>\n          <em>{i+1}</em>\n          <span dangerouslySetInnerHTML={{__html: this.props.steps[i].title}}/>\n      </li>\n      //{this.props.steps[i].name}\n    ));\n  }\n\n  render() {\n    const { props } = this;\n    //let compToRender;\n\n    // clone the step component dynamically and tag it as activeComponent so we can validate it on next. also bind the jumpToStep piping method\n//    let cloneExtensions = {\n//      jumpToStep: (t) => {\n//        this.jumpToStep(t);\n//      }\n//    };\n\n//    const componentPointer = this.props.steps[this.state.compState].component;\n//\n//    // can only update refs if its a regular React component (not a pure component), so lets check that\n//    if (componentPointer instanceof Component || // unit test deteceted that instanceof Component can be in either of these locations so test both (not sure why this is the case)\n//        (componentPointer.type && componentPointer.type.prototype instanceof Component)) {\n//          cloneExtensions.ref = 'activeComponent';\n//    }\n\n    //compToRender = React.cloneElement(componentPointer, cloneExtensions);\n//{compToRender}\n\n    return (\n      <div className=\"formWizard\" onKeyDown={(evt) => {this.handleKeyDown(evt)}}>\n          {\n              this.props.showSteps\n                  ? <ol className=\"progtrckr clearfix\">\n                      {this.renderSteps()}\n                  </ol>\n              : <span></span>\n          }\n\n        <Document frontendParams={{documentName: this.props.documentName}} />\n\n        <br/>\n        <div style={this.props.showNavigation ? {} : this.hidden} className=\"footer-buttons\">\n          <button\n            className={classNames(props.backButtonCls, {disabled: !this.state.showPreviousBtn})}\n            onClick={() => {this.previous()}}\n            id=\"prev-button\"\n          >\n            {this.props.backButtonText}\n          </button> { }\n          <button\n            className={classNames(props.nextButtonCls, {disabled: !this.state.showNextBtn})}\n            onClick={() => {this.next()}}\n            id=\"next-button\"\n          >\n            {this.state.nextStepText}\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nFormWizard.defaultProps = {\n  showSteps: true,\n  showNavigation: true,\n  stepsNavigation: true,\n  prevBtnOnLastStep: true,\n  preventEnterSubmission: false,\n  startAtStep: 0,\n  nextButtonText: \"Next\",\n  nextButtonCls: \"btn btn-prev btn-primary pull-right\",\n  backButtonText: \"Previous\",\n  backButtonCls: \"btn btn-next btn-primary pull-left\",\n  documentName: \"FormWizard\",\n};\n\nFormWizard.propTypes = {\n  steps: PropTypes.arrayOf(PropTypes.shape({\n    title: PropTypes.string.isRequired,\n    url: PropTypes.string.isRequired\n  })).isRequired,\n  showSteps: PropTypes.bool,\n  showNavigation: PropTypes.bool,\n  stepsNavigation: PropTypes.bool,\n  prevBtnOnLastStep: PropTypes.bool,\n  preventEnterSubmission: PropTypes.bool,\n  startAtStep: PropTypes.number,\n  nextButtonText: PropTypes.string,\n  nextButtonCls: PropTypes.string,\n  backButtonCls: PropTypes.string,\n  backButtonText: PropTypes.string,\n  documentName: PropTypes.string\n};\n\nexport default FormWizard","import React from 'react';\nimport PropTypes            from 'prop-types';\nimport be5                  from '../be5';\nimport Document             from './Document';\nimport { Nav, NavItem, NavLink } from 'reactstrap';\n\n\nclass Navs extends React.Component\n{\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      compState: this.props.startAtStep\n    };\n\n    this.refresh = this.refresh.bind(this);\n  }\n\n  componentDidMount(){\n    this.refresh();\n  }\n\n  refresh() {\n    be5.url.process(this.props.documentName, this.props.steps[this.state.compState].url);\n  }\n  \n  setNavState(id) {\n    this.setState({compState: id});\n    be5.url.process(this.props.documentName, this.props.steps[id].url);\n  }\n  \n  renderSteps(){\n    return this.props.steps.map((s, i)=> (\n        <NavItem key={\"NavItem\"+i}>\n          <NavLink href=\"#\" active={i === this.state.compState} onClick={() => this.setNavState(i)}\n                   key={\"NavLink\"+i} >{this.props.steps[i].title}</NavLink>\n        </NavItem>\n    ));\n  }\n\n  render() {\n    const navProps = {\n      tabs: this.props.tabs,\n      pills: this.props.pills,\n      vertical: this.props.vertical,\n      navbar: this.props.navbar,\n      tag: this.props.tag\n    };\n\n    return (\n      <div className=\"navs-component\">\n        <Nav {...navProps}>\n          {this.renderSteps()}\n        </Nav>\n        <div className=\"tab-content\">\n          <Document frontendParams={{documentName: this.props.documentName}} />\n        </div>\n     </div>\n    );\n  }\n\n}\n\nNavs.defaultProps = {\n  startAtStep: 0,\n  documentName: \"navs\",\n};\n\nNavs.propTypes = {\n  tabs: PropTypes.bool,\n  pills: PropTypes.bool,\n  vertical: PropTypes.bool,\n  navbar: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\n  steps: PropTypes.arrayOf(PropTypes.shape({\n    title: PropTypes.string.isRequired,\n    url: PropTypes.string.isRequired\n  })).isRequired,\n  startAtStep: PropTypes.number,\n  documentName: PropTypes.string\n};\n\n\nexport default Navs;","import React from 'react';\nimport PropTypes            from 'prop-types';\nimport Property             from './Property';\nimport JsonPointer          from 'json-pointer';\n\nclass Properties extends React.Component {\n\n  static get(path, bean, localization){\n    const itemName = path.substring(path.lastIndexOf(\"/\")+1);\n    const itemMeta = bean.meta[path];\n    const itemValue = JsonPointer.get(bean, \"/values\" + path);\n    return {\n      meta: itemMeta,\n      name: itemName,\n      value: itemValue,\n      path: path,\n      key: itemName + \"Property\",\n      ref: itemName + \"Property\",\n      localization: localization\n    }\n  }\n\n  render() {\n    let fields = this.props.bean.order.map((path, i)=> {\n      if(this.props.ids === undefined || this.props.ids.includes(i)){\n        return(\n         <Property {...Properties.get(path, this.props.bean, this.props.localization)} onChange={this.props.onChange} />\n        )\n      }else{\n        return null;\n      }\n    });\n\n    return <div className={this.props.className}>{fields}</div>;\n  }\n\n}\n\nProperties.defaultProps = {\n  className: \"row\",\n  localization: {},\n};\n\nProperties.propTypes = {\n  className: PropTypes.string.isRequired,\n  bean: PropTypes.object.isRequired,\n  ids: PropTypes.array,\n  onChange: PropTypes.func,\n  localization: PropTypes.object\n};\n\nexport default Properties;\n","// @create-index\nimport be5 from './be5.js';\nimport be5init from './be5init.js';\n//import be5styles from './be5styles.js';\nimport constants from './constants.js';\nimport preconditions from './preconditions.js';\nimport settings from './settings.js';\n\n// core\nimport bus from './core/bus.js';\nimport changeDocument from './core/changeDocument.js';\nimport documentUtils from './core/documentUtils.js';\nimport http from './core/http.js';\n\n// components\nimport Application      from './components/Application.js';\nimport Be5Components    from './components/Be5Components.js';\nimport Be5Menu          from './components/be5Menu/Be5Menu.js';\nimport Be5MenuHolder    from './components/be5Menu/Be5MenuHolder.js';\nimport Be5MenuItem      from './components/be5Menu/Be5MenuItem.js';\nimport Document         from './components/Document.js';\nimport HelpInfo         from './components/HelpInfo.js';\nimport LanguageSelector from './components/LanguageSelector.js';\nimport RoleSelector     from './components/RoleSelector.js';\nimport SideBar          from './components/SideBar.js';\nimport Sorter           from './components/Sorter.js';\nimport SplitPane        from './components/SplitPane.js';\nimport StaticPage       from './components/StaticPage.js';\nimport ErrorPane        from './components/ErrorPane.js';\nimport TreeMenu         from './components/TreeMenu.js';\nimport FormWizard       from './components/FormWizard.js';\nimport Navs             from './components/Navs.js';\n\n// forms\nimport Form               from './components/forms/Form.js';\nimport SubmitOnChangeForm from './components/forms/SubmitOnChangeForm.js';\nimport ModalForm          from './components/forms/ModalForm.js';\nimport FinishedResult     from './components/forms/FinishedResult.js';\n\n// tables\nimport Table           from './components/tables/Table.js';\nimport QuickColumns    from './components/tables/QuickColumns.js';\nimport OperationBox    from './components/tables/OperationBox.js';\nimport FormTable       from './components/tables/FormTable.js';\nimport TableForm       from './components/tables/TableForm.js';\nimport TableFormRow    from './components/tables/TableFormRow.js';\n\n// menu\nimport Menu            from './components/menu/Menu.js';\nimport MenuBody        from './components/menu/MenuBody.js';\nimport MenuSearchField from './components/menu/MenuSearchField.js';\nimport MenuFooter      from './components/menu/MenuFooter.js';\nimport MenuNode        from './components/menu/MenuNode.js';\n\n// properties\nimport Property        from './components/properties/Property.js';\nimport Properties      from './components/properties/Properties.js';\nimport PropertyInput   from './components/properties/PropertyInput.js';\nimport PropertySet     from './components/properties/PropertySet.js';\n\n// actions\nimport formAction      from './actions/form.js';\nimport loadingAction   from './actions/loading.js';\nimport loginAction     from './actions/login.js';\nimport logoutAction    from './actions/logout.js';\nimport qBuilderAction  from './actions/qBuilder.js';\nimport staticAction    from './actions/static.js';\nimport tableAction     from './actions/table.js';\nimport textAction      from './actions/text.js';\n\n// services\nimport action            from './services/actions.js';\nimport forms             from './services/forms.js';\nimport tables            from './services/tables.js'\nimport formsCollection  from './services/formsCollection.js';\nimport tablesCollection from './services/tablesCollection.js';\nimport actionsCollection from './services/actionsCollection.js';\n\n\nexport {\n  be5,\n  be5init,\n  constants,\n  preconditions,\n  settings,\n\n  // core\n  bus,\n  changeDocument,\n  documentUtils,\n  http,\n\n  // components\n  Application      ,\n  Be5Components    ,\n  Be5Menu          ,\n  Be5MenuHolder    ,\n  Be5MenuItem      ,\n  Document         ,\n  HelpInfo         ,\n  LanguageSelector ,\n  RoleSelector     ,\n  SideBar          ,\n  Sorter           ,\n  SplitPane        ,\n  StaticPage       ,\n  ErrorPane        ,\n  TreeMenu         ,\n  FormWizard       ,\n  Navs             ,\n\n  // forms\n  Form,\n  SubmitOnChangeForm,\n  ModalForm,\n  FinishedResult,\n\n  // tables\n  Table           ,\n  QuickColumns    ,\n  OperationBox    ,\n  FormTable       ,\n  TableForm       ,\n  TableFormRow    ,\n\n  // menu\n  Menu            ,\n  MenuBody        ,\n  MenuSearchField ,\n  MenuFooter      ,\n  MenuNode        ,\n\n  // properties\n  Property        ,\n  Properties      ,\n  PropertyInput   ,\n  PropertySet     ,\n\n  // actions\n  formAction,\n  loadingAction,\n  loginAction,\n  logoutAction,\n  qBuilderAction,\n  staticAction,\n  tableAction,\n  textAction,\n\n  // services\n  action,\n  forms,\n  tables,\n  formsCollection,\n  tablesCollection,\n  actionsCollection\n}"],"names":["Object","freeze","getUrl","window","location","baseUrl","protocol","host","pathname","split","listeners","listenersObject","key","replacement","listen","eventType","listener","push","fire","type","event","forEach","replaceListeners","createMandatoryArgumentError","message","createArgumentEqualityError","argument","arg1","arg2","documentName","value","passed","actionsCollection","actionName","types","fn","be5","messages","en","loc","addMessages","toLowerCase","locale","newMessages","defMessages","msg","undefined","dataTablesLocal","getJSON","data","msgs","docTitle","titleComponents","appInfo","title","filter","c","join","url","substring","document","hash","process","mainDocumentName","action","positional","named","form","concat","res","i","length","segments","s","indexOf","_","object","urlParts","hashParams","hasHashParam","urlPart","pos","name","decodeURIComponent","replace","getAction","apply","errorUnknownAction","error","path","def","URL_PREFIX","resource","params","JSON","stringify","success","failure","net","requestUrl","APPLICATION_PREFIX","transform","copy","babelHelpers.typeof","paramString","failureFunc","result","log","ajax","utils","getBaseUrl","status","xhr","aborted","errorCannotConnect","errorNoData","errorInvalidErrorResponse","code","errorHandlers","errorThrown","errorServerQueryException","statusText","toString","prefix","substr","states","set","get","getAll","page","component","Loading","React","Component","registerAction","FinishedResult","changeLocationHash","props","info","attributes","successfullyCompleted","__html","propTypes","PropTypes","shape","isRequired","StaticPage","content","links","self","frontendParams","text","createValue","_ts_","Date","getTime","meta","string","ErrorPane","state","helpCollapse","helpCollapseToggle","bind","setState","errors","detail","marginBottom","details","array","formsCollection","formName","tablesCollection","tableName","_send","_performData","json","Table","performData","entity","query","requestParams","request","tableComponentName","layout","tableComponent","getTable","tableComponentNotFound","OperationBox","e","$","ReactDOM","findDOMNode","refs","hasClass","operation","operations","find","requiresConfirmation","confirm","onOperationClick","preventDefault","visible","visibleWhen","tableState","selectedRows","hasRows","addClass","removeClass","splitWithSpaces","elements","out","each","map","onClick","QuickColumns","createStateFromProps","nextProps","quickColumns","firstRow","col","idx","options","quick","columnId","_table","table","forceUpdate","dataTable","columnsCount","fnSettings","aoColumns","selectable","dtColumn","api","column","checks","cell","columns","quickHandleChange","formatCell","isColumn","Array","isArray","blankNulls","row","format","numberFormatter","mask","link","css","wrap","class","html","append","clone","TableBox","applyTableStyle","_refreshEnablementIfNeeded","nextState","attr","category","parameters","load","operationDocumentName","hasOwnProperty","callbacks","onSelectionChange","node","empty","_this","thead","theadrow","appendTo","tbody","tfoot","tfootrow","hasCheckBoxes","editable","op","columnIndexShift","rows","rowId","tr","cells","prepend","id","tableDiv","lengths","pageLength","sort","a","b","language","dataTables","tableConfiguration","totalNumberOfRows","d","j","val","display","create","container","index","change","checked","inArray","splice","groupingColumn","nColumns","drawGrouping","resultGroupingColumn","columnDefs","targets","nodes","last","group","eq","before","drawCallback","settings","on","setTable","emptyTable","refreshEnablement","ListTableBox","list","runReload","displayType","TitleTag","titleLevel","refresh","registerTable","operationParams","values","_performOperationResult","applyParams","_performForm","onSuccess","parentDocumentName","documentRefreshSuffix","history","back","mainModalDocumentName","bus","startsWith","href","tableJson","operationResult","formComponentName","formComponent","getForm","formComponentNotFound","parse","forms","getOperationParams","paramsObject","Document","reload","Number","isInteger","parseInt","documentContent","loadingItem","devRole","devTools","reloadImg","contentItem","ui","setTitle","DocumentContent","assign","function","QueryBuilder","included","sql","finalSql","updateCode","update","newSql","HelpInfo","isOpen","classnames","className","helpInfo","tag","bool","oneOfType","func","defaultProps","TableForm","updateDocuments","TableFormRow","FormTable","Property","onDateChange","handleChange","handleChangeMulti","numericHandleChange","onChange","_getValueFromEvent","selectArray","keys","valueAsNumber","valueAsString","input","date","match","valueControl","getControl","label","displayName","messageElement","messageClassName","hasStatusClasses","classNames","classNameForm","classNameFormCheck","classNameFormGroup","cssClasses","outerClasses","hidden","classes","canBeNull","labelField","_d","formatDate","target","element","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","onerror","extraAttrs","handle","multipleSelectionList","extraAttrsMap","getExtraAttrsMap","controls","controlClassName","readOnly","optionsToArray","tagList","strValue","selectProps","localization","clearAllText","clearValueText","noResultsText","searchPromptText","loadingPlaceholder","placeholder","matchPos","inputType","moment","v","disabled","getMaskInput","validationRules","numericProps","getNumericProps","files","fileName","getBase64","then","evt","editor","getData","rawValue","passwordField","isNumberInput","rules","columnSize","optionObject","day","getDate","month","getMonth","year","getFullYear","format2digit","number","slice","PropertySet","curGroup","curGroupId","curGroupName","itemName","lastIndexOf","itemMeta","bean","itemValue","JsonPointer","fields","finishGroup","_createGroup","prototype","order","itemProps","newGroupId","groupId","newGroupName","groupName","field","Form","createClass","extend","allFieldsFilled","initForm","onFormDidMount","_allFieldsFilled","_getRawFormValues","getParams","controlName","required","_reloadOnChange","hideActions","_createOkAction","_createCancelAction","Submit","showCancel","cancel","every","errorModel","formBoxCssClasses","_applyOnSubmit","_onFieldChange","property","_createFormActions","_getErrorPane","registerForm","PropertyInput","defaultValue","SubmitOnChangeForm","_onFieldChangeAndSubmit","cssClass","ModalForm","hashChange","documentState","addEventListener","arg","selected","requestJson","requestHtml","Language","onLanguageClick","LanguageList","languageNodes","languages","LanguageBox","changeLanguage","Role","RoleBox","selectedRoles","_onRoleChange","_changeRoles","handleSelectAll","handleClear","availableRoles","roleNodes","role","roles","username","containRoleIndex","logoBe","createUnknownActionException","MenuNode","level","hasAction","actions","hasChildren","children","_getHead","_getOperations","nextLevel","childKey","child","DOM","div","ul","test","_onClick","hasOperations","opBoxKey","opKey","MenuBody","root","_getFilteredRoot","filteredRoot","rootNodes","containsIgnoreCase","str","anyChildContainsIgnoreCase","any","filterNodeContent","filterByTitle","MenuSearchField","_handleChange","Menu","_handleQueryChange","menubody","SideBar","RoleSelector","LanguageSelector","menu","languageSelector","roleSelector","Pane","style","hide","size","height","width","flex","Resizer","down","span","onMouseDown","handleDown","SplitPane","up","move","ref","pane1","defaultSize","removeEventListener","position","clientX","clientY","active","getComputedStyle","styles","rect","getBoundingClientRect","right","left","bottom","top","current","newSize","minSize","into","obj","merge","child0","child1","createElement","Be5Components","open","close","modal","limit","Application","sideBar","be5Components","tree","coords","findWhere","getMenu","addListener","changed","updateActions","resultActions","item","qitem","loaded","show","_onMenuChanged","Be5MenuHolder","getRaw","rootMenuItems","_renderMenuItems","branding","rightButtons","_renderRightButtons","loggedIn","items","inDropdown","default","liClass","aClass","dropdownMenuItems","available","_getCoordinates","view","Const","DEFAULT_VIEW","oneOf","_renderColumn","sortingColumnName","klass","cx","asc","sortingOrder","iconClass","_onSelect","onSelect","rootItems","_renderNode","activeItemId","_handleClick","onItemSelect","FormWizard","startAtStep","getNavStates","steps","nextTextOnFinalActionStep","nextButtonText","getPrevNextBtnState","compState","indx","currentStep","showPreviousBtn","showNextBtn","nextStepText","prevBtnOnLastStep","next","navState","checkNavState","which","preventEnterSubmission","setNavState","liClassName","stepsNavigation","getClassName","jumpToStep","handleKeyDown","showSteps","renderSteps","showNavigation","backButtonCls","previous","backButtonText","nextButtonCls","arrayOf","Navs","navProps","tabs","pills","vertical","navbar","Properties","ids","includes"],"mappings":"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"}